{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, getWindow, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n  separatorBorder: Color.transparent\n};\nclass ViewItem {\n  set size(size) {\n    this._size = size;\n  }\n  get size() {\n    return this._size;\n  }\n  get visible() {\n    return typeof this._cachedVisibleSize === 'undefined';\n  }\n  setVisible(visible, size) {\n    if (visible === this.visible) {\n      return;\n    }\n    if (visible) {\n      this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n      this._cachedVisibleSize = undefined;\n    } else {\n      this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n      this.size = 0;\n    }\n    this.container.classList.toggle('visible', visible);\n    try {\n      this.view.setVisible?.(visible);\n    } catch (e) {\n      console.error('Splitview: Failed to set visible view');\n      console.error(e);\n    }\n  }\n  get minimumSize() {\n    return this.visible ? this.view.minimumSize : 0;\n  }\n  get viewMinimumSize() {\n    return this.view.minimumSize;\n  }\n  get maximumSize() {\n    return this.visible ? this.view.maximumSize : 0;\n  }\n  get viewMaximumSize() {\n    return this.view.maximumSize;\n  }\n  get priority() {\n    return this.view.priority;\n  }\n  get proportionalLayout() {\n    return this.view.proportionalLayout ?? true;\n  }\n  get snap() {\n    return !!this.view.snap;\n  }\n  set enabled(enabled) {\n    this.container.style.pointerEvents = enabled ? '' : 'none';\n  }\n  constructor(container, view, size, disposable) {\n    this.container = container;\n    this.view = view;\n    this.disposable = disposable;\n    this._cachedVisibleSize = undefined;\n    if (typeof size === 'number') {\n      this._size = size;\n      this._cachedVisibleSize = undefined;\n      container.classList.add('visible');\n    } else {\n      this._size = 0;\n      this._cachedVisibleSize = size.cachedVisibleSize;\n    }\n  }\n  layout(offset, layoutContext) {\n    this.layoutContainer(offset);\n    try {\n      this.view.layout(this.size, offset, layoutContext);\n    } catch (e) {\n      console.error('Splitview: Failed to layout view');\n      console.error(e);\n    }\n  }\n  dispose() {\n    this.disposable.dispose();\n  }\n}\nclass VerticalViewItem extends ViewItem {\n  layoutContainer(offset) {\n    this.container.style.top = `${offset}px`;\n    this.container.style.height = `${this.size}px`;\n  }\n}\nclass HorizontalViewItem extends ViewItem {\n  layoutContainer(offset) {\n    this.container.style.left = `${offset}px`;\n    this.container.style.width = `${this.size}px`;\n  }\n}\nvar State;\n(function (State) {\n  State[State[\"Idle\"] = 0] = \"Idle\";\n  State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n  /**\n   * When adding or removing views, distribute the delta space among\n   * all other views.\n   */\n  Sizing.Distribute = {\n    type: 'distribute'\n  };\n  /**\n   * When adding or removing views, split the delta space with another\n   * specific view, indexed by the provided `index`.\n   */\n  function Split(index) {\n    return {\n      type: 'split',\n      index\n    };\n  }\n  Sizing.Split = Split;\n  /**\n   * When adding a view, use DistributeSizing when all pre-existing views are\n   * distributed evenly, otherwise use SplitSizing.\n   */\n  function Auto(index) {\n    return {\n      type: 'auto',\n      index\n    };\n  }\n  Sizing.Auto = Auto;\n  /**\n   * When adding or removing views, assume the view is invisible.\n   */\n  function Invisible(cachedVisibleSize) {\n    return {\n      type: 'invisible',\n      cachedVisibleSize\n    };\n  }\n  Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n  get orthogonalStartSash() {\n    return this._orthogonalStartSash;\n  }\n  get orthogonalEndSash() {\n    return this._orthogonalEndSash;\n  }\n  get startSnappingEnabled() {\n    return this._startSnappingEnabled;\n  }\n  get endSnappingEnabled() {\n    return this._endSnappingEnabled;\n  }\n  /**\n   * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n   * located at the left- or top-most side of the SplitView.\n   * Corner sashes will be created automatically at the intersections.\n   */\n  set orthogonalStartSash(sash) {\n    for (const sashItem of this.sashItems) {\n      sashItem.sash.orthogonalStartSash = sash;\n    }\n    this._orthogonalStartSash = sash;\n  }\n  /**\n   * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n   * located at the right- or bottom-most side of the SplitView.\n   * Corner sashes will be created automatically at the intersections.\n   */\n  set orthogonalEndSash(sash) {\n    for (const sashItem of this.sashItems) {\n      sashItem.sash.orthogonalEndSash = sash;\n    }\n    this._orthogonalEndSash = sash;\n  }\n  /**\n   * Enable/disable snapping at the beginning of this {@link SplitView}.\n   */\n  set startSnappingEnabled(startSnappingEnabled) {\n    if (this._startSnappingEnabled === startSnappingEnabled) {\n      return;\n    }\n    this._startSnappingEnabled = startSnappingEnabled;\n    this.updateSashEnablement();\n  }\n  /**\n   * Enable/disable snapping at the end of this {@link SplitView}.\n   */\n  set endSnappingEnabled(endSnappingEnabled) {\n    if (this._endSnappingEnabled === endSnappingEnabled) {\n      return;\n    }\n    this._endSnappingEnabled = endSnappingEnabled;\n    this.updateSashEnablement();\n  }\n  /**\n   * Create a new {@link SplitView} instance.\n   */\n  constructor(container, options = {}) {\n    super();\n    this.size = 0;\n    this._contentSize = 0;\n    this.proportions = undefined;\n    this.viewItems = [];\n    this.sashItems = []; // used in tests\n    this.state = State.Idle;\n    this._onDidSashChange = this._register(new Emitter());\n    this._onDidSashReset = this._register(new Emitter());\n    this._startSnappingEnabled = true;\n    this._endSnappingEnabled = true;\n    /**\n     * Fires whenever the user resizes a {@link Sash sash}.\n     */\n    this.onDidSashChange = this._onDidSashChange.event;\n    /**\n     * Fires whenever the user double clicks a {@link Sash sash}.\n     */\n    this.onDidSashReset = this._onDidSashReset.event;\n    this.orientation = options.orientation ?? 0 /* Orientation.VERTICAL */;\n    this.inverseAltBehavior = options.inverseAltBehavior ?? false;\n    this.proportionalLayout = options.proportionalLayout ?? true;\n    this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n    this.el = document.createElement('div');\n    this.el.classList.add('monaco-split-view2');\n    this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n    container.appendChild(this.el);\n    this.sashContainer = append(this.el, $('.sash-container'));\n    this.viewContainer = $('.split-view-container');\n    this.scrollable = this._register(new Scrollable({\n      forceIntegerValues: true,\n      smoothScrollDuration: 125,\n      scheduleAtNextAnimationFrame: callback => scheduleAtNextAnimationFrame(getWindow(this.el), callback)\n    }));\n    this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n      vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? options.scrollbarVisibility ?? 1 /* ScrollbarVisibility.Auto */ : 2 /* ScrollbarVisibility.Hidden */,\n      horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? options.scrollbarVisibility ?? 1 /* ScrollbarVisibility.Auto */ : 2 /* ScrollbarVisibility.Hidden */\n    }, this.scrollable));\n    // https://github.com/microsoft/vscode/issues/157737\n    const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n    this._register(onDidScrollViewContainer(_ => {\n      const position = this.scrollableElement.getScrollPosition();\n      const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n      const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n      if (scrollLeft !== undefined || scrollTop !== undefined) {\n        this.scrollableElement.setScrollPosition({\n          scrollLeft,\n          scrollTop\n        });\n      }\n    }));\n    this.onDidScroll = this.scrollableElement.onScroll;\n    this._register(this.onDidScroll(e => {\n      if (e.scrollTopChanged) {\n        this.viewContainer.scrollTop = e.scrollTop;\n      }\n      if (e.scrollLeftChanged) {\n        this.viewContainer.scrollLeft = e.scrollLeft;\n      }\n    }));\n    append(this.el, this.scrollableElement.getDomNode());\n    this.style(options.styles || defaultStyles);\n    // We have an existing set of view, add them now\n    if (options.descriptor) {\n      this.size = options.descriptor.size;\n      options.descriptor.views.forEach((viewDescriptor, index) => {\n        const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : {\n          type: 'invisible',\n          cachedVisibleSize: viewDescriptor.size\n        };\n        const view = viewDescriptor.view;\n        this.doAddView(view, sizing, index, true);\n      });\n      // Initialize content size and proportions for first layout\n      this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n      this.saveProportions();\n    }\n  }\n  style(styles) {\n    if (styles.separatorBorder.isTransparent()) {\n      this.el.classList.remove('separator-border');\n      this.el.style.removeProperty('--separator-border');\n    } else {\n      this.el.classList.add('separator-border');\n      this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n    }\n  }\n  /**\n   * Add a {@link IView view} to this {@link SplitView}.\n   *\n   * @param view The view to add.\n   * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n   * @param index The index to insert the view on.\n   * @param skipLayout Whether layout should be skipped.\n   */\n  addView(view, size, index = this.viewItems.length, skipLayout) {\n    this.doAddView(view, size, index, skipLayout);\n  }\n  /**\n   * Layout the {@link SplitView}.\n   *\n   * @param size The entire size of the {@link SplitView}.\n   * @param layoutContext An optional layout context to pass along to {@link IView views}.\n   */\n  layout(size, layoutContext) {\n    const previousSize = Math.max(this.size, this._contentSize);\n    this.size = size;\n    this.layoutContext = layoutContext;\n    if (!this.proportions) {\n      const indexes = range(this.viewItems.length);\n      const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n      const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n      this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    } else {\n      let total = 0;\n      for (let i = 0; i < this.viewItems.length; i++) {\n        const item = this.viewItems[i];\n        const proportion = this.proportions[i];\n        if (typeof proportion === 'number') {\n          total += proportion;\n        } else {\n          size -= item.size;\n        }\n      }\n      for (let i = 0; i < this.viewItems.length; i++) {\n        const item = this.viewItems[i];\n        const proportion = this.proportions[i];\n        if (typeof proportion === 'number' && total > 0) {\n          item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n        }\n      }\n    }\n    this.distributeEmptySpace();\n    this.layoutViews();\n  }\n  saveProportions() {\n    if (this.proportionalLayout && this._contentSize > 0) {\n      this.proportions = this.viewItems.map(v => v.proportionalLayout && v.visible ? v.size / this._contentSize : undefined);\n    }\n  }\n  onSashStart({\n    sash,\n    start,\n    alt\n  }) {\n    for (const item of this.viewItems) {\n      item.enabled = false;\n    }\n    const index = this.sashItems.findIndex(item => item.sash === sash);\n    // This way, we can press Alt while we resize a sash, macOS style!\n    const disposable = combinedDisposable(addDisposableListener(this.el.ownerDocument.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(this.el.ownerDocument.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n    const resetSashDragState = (start, alt) => {\n      const sizes = this.viewItems.map(i => i.size);\n      let minDelta = Number.NEGATIVE_INFINITY;\n      let maxDelta = Number.POSITIVE_INFINITY;\n      if (this.inverseAltBehavior) {\n        alt = !alt;\n      }\n      if (alt) {\n        // When we're using the last sash with Alt, we're resizing\n        // the view to the left/up, instead of right/down as usual\n        // Thus, we must do the inverse of the usual\n        const isLastSash = index === this.sashItems.length - 1;\n        if (isLastSash) {\n          const viewItem = this.viewItems[index];\n          minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n          maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n        } else {\n          const viewItem = this.viewItems[index + 1];\n          minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n          maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n        }\n      }\n      let snapBefore;\n      let snapAfter;\n      if (!alt) {\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n        const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        if (typeof snapBeforeIndex === 'number') {\n          const viewItem = this.viewItems[snapBeforeIndex];\n          const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapBefore = {\n            index: snapBeforeIndex,\n            limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n            size: viewItem.size\n          };\n        }\n        if (typeof snapAfterIndex === 'number') {\n          const viewItem = this.viewItems[snapAfterIndex];\n          const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n          snapAfter = {\n            index: snapAfterIndex,\n            limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n            size: viewItem.size\n          };\n        }\n      }\n      this.sashDragState = {\n        start,\n        current: start,\n        index,\n        sizes,\n        minDelta,\n        maxDelta,\n        alt,\n        snapBefore,\n        snapAfter,\n        disposable\n      };\n    };\n    resetSashDragState(start, alt);\n  }\n  onSashChange({\n    current\n  }) {\n    const {\n      index,\n      start,\n      sizes,\n      alt,\n      minDelta,\n      maxDelta,\n      snapBefore,\n      snapAfter\n    } = this.sashDragState;\n    this.sashDragState.current = current;\n    const delta = current - start;\n    const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n    if (alt) {\n      const isLastSash = index === this.sashItems.length - 1;\n      const newSizes = this.viewItems.map(i => i.size);\n      const viewItemIndex = isLastSash ? index : index + 1;\n      const viewItem = this.viewItems[viewItemIndex];\n      const newMinDelta = viewItem.size - viewItem.maximumSize;\n      const newMaxDelta = viewItem.size - viewItem.minimumSize;\n      const resizeIndex = isLastSash ? index - 1 : index + 1;\n      this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n    }\n    this.distributeEmptySpace();\n    this.layoutViews();\n  }\n  onSashEnd(index) {\n    this._onDidSashChange.fire(index);\n    this.sashDragState.disposable.dispose();\n    this.saveProportions();\n    for (const item of this.viewItems) {\n      item.enabled = true;\n    }\n  }\n  onViewChange(item, size) {\n    const index = this.viewItems.indexOf(item);\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n    size = typeof size === 'number' ? size : item.size;\n    size = clamp(size, item.minimumSize, item.maximumSize);\n    if (this.inverseAltBehavior && index > 0) {\n      // In this case, we want the view to grow or shrink both sides equally\n      // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n      this.resize(index - 1, Math.floor((item.size - size) / 2));\n      this.distributeEmptySpace();\n      this.layoutViews();\n    } else {\n      item.size = size;\n      this.relayout([index], undefined);\n    }\n  }\n  /**\n   * Resize a {@link IView view} within the {@link SplitView}.\n   *\n   * @param index The {@link IView view} index.\n   * @param size The {@link IView view} size.\n   */\n  resizeView(index, size) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return;\n    }\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n    this.state = State.Busy;\n    try {\n      const indexes = range(this.viewItems.length).filter(i => i !== index);\n      const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n      const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n      const item = this.viewItems[index];\n      size = Math.round(size);\n      size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n      item.size = size;\n      this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    } finally {\n      this.state = State.Idle;\n    }\n  }\n  /**\n   * Distribute the entire {@link SplitView} size among all {@link IView views}.\n   */\n  distributeViewSizes() {\n    const flexibleViewItems = [];\n    let flexibleSize = 0;\n    for (const item of this.viewItems) {\n      if (item.maximumSize - item.minimumSize > 0) {\n        flexibleViewItems.push(item);\n        flexibleSize += item.size;\n      }\n    }\n    const size = Math.floor(flexibleSize / flexibleViewItems.length);\n    for (const item of flexibleViewItems) {\n      item.size = clamp(size, item.minimumSize, item.maximumSize);\n    }\n    const indexes = range(this.viewItems.length);\n    const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n    const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n    this.relayout(lowPriorityIndexes, highPriorityIndexes);\n  }\n  /**\n   * Returns the size of a {@link IView view}.\n   */\n  getViewSize(index) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return -1;\n    }\n    return this.viewItems[index].size;\n  }\n  doAddView(view, size, index = this.viewItems.length, skipLayout) {\n    if (this.state !== State.Idle) {\n      throw new Error('Cant modify splitview');\n    }\n    this.state = State.Busy;\n    try {\n      // Add view\n      const container = $('.split-view-view');\n      if (index === this.viewItems.length) {\n        this.viewContainer.appendChild(container);\n      } else {\n        this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n      }\n      const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n      const containerDisposable = toDisposable(() => container.remove());\n      const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n      let viewSize;\n      if (typeof size === 'number') {\n        viewSize = size;\n      } else {\n        if (size.type === 'auto') {\n          if (this.areViewsDistributed()) {\n            size = {\n              type: 'distribute'\n            };\n          } else {\n            size = {\n              type: 'split',\n              index: size.index\n            };\n          }\n        }\n        if (size.type === 'split') {\n          viewSize = this.getViewSize(size.index) / 2;\n        } else if (size.type === 'invisible') {\n          viewSize = {\n            cachedVisibleSize: size.cachedVisibleSize\n          };\n        } else {\n          viewSize = view.minimumSize;\n        }\n      }\n      const item = this.orientation === 0 /* Orientation.VERTICAL */ ? new VerticalViewItem(container, view, viewSize, disposable) : new HorizontalViewItem(container, view, viewSize, disposable);\n      this.viewItems.splice(index, 0, item);\n      // Add sash\n      if (this.viewItems.length > 1) {\n        const opts = {\n          orthogonalStartSash: this.orthogonalStartSash,\n          orthogonalEndSash: this.orthogonalEndSash\n        };\n        const sash = this.orientation === 0 /* Orientation.VERTICAL */ ? new Sash(this.sashContainer, {\n          getHorizontalSashTop: s => this.getSashPosition(s),\n          getHorizontalSashWidth: this.getSashOrthogonalSize\n        }, {\n          ...opts,\n          orientation: 1 /* Orientation.HORIZONTAL */\n        }) : new Sash(this.sashContainer, {\n          getVerticalSashLeft: s => this.getSashPosition(s),\n          getVerticalSashHeight: this.getSashOrthogonalSize\n        }, {\n          ...opts,\n          orientation: 0 /* Orientation.VERTICAL */\n        });\n        const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */ ? e => ({\n          sash,\n          start: e.startY,\n          current: e.currentY,\n          alt: e.altKey\n        }) : e => ({\n          sash,\n          start: e.startX,\n          current: e.currentX,\n          alt: e.altKey\n        });\n        const onStart = Event.map(sash.onDidStart, sashEventMapper);\n        const onStartDisposable = onStart(this.onSashStart, this);\n        const onChange = Event.map(sash.onDidChange, sashEventMapper);\n        const onChangeDisposable = onChange(this.onSashChange, this);\n        const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n        const onEndDisposable = onEnd(this.onSashEnd, this);\n        const onDidResetDisposable = sash.onDidReset(() => {\n          const index = this.sashItems.findIndex(item => item.sash === sash);\n          const upIndexes = range(index, -1);\n          const downIndexes = range(index + 1, this.viewItems.length);\n          const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n          const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n          if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n            return;\n          }\n          if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n            return;\n          }\n          this._onDidSashReset.fire(index);\n        });\n        const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n        const sashItem = {\n          sash,\n          disposable\n        };\n        this.sashItems.splice(index - 1, 0, sashItem);\n      }\n      container.appendChild(view.element);\n      let highPriorityIndexes;\n      if (typeof size !== 'number' && size.type === 'split') {\n        highPriorityIndexes = [size.index];\n      }\n      if (!skipLayout) {\n        this.relayout([index], highPriorityIndexes);\n      }\n      if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n        this.distributeViewSizes();\n      }\n    } finally {\n      this.state = State.Idle;\n    }\n  }\n  relayout(lowPriorityIndexes, highPriorityIndexes) {\n    const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n    this.distributeEmptySpace();\n    this.layoutViews();\n    this.saveProportions();\n  }\n  resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n    if (index < 0 || index >= this.viewItems.length) {\n      return 0;\n    }\n    const upIndexes = range(index, -1);\n    const downIndexes = range(index + 1, this.viewItems.length);\n    if (highPriorityIndexes) {\n      for (const index of highPriorityIndexes) {\n        pushToStart(upIndexes, index);\n        pushToStart(downIndexes, index);\n      }\n    }\n    if (lowPriorityIndexes) {\n      for (const index of lowPriorityIndexes) {\n        pushToEnd(upIndexes, index);\n        pushToEnd(downIndexes, index);\n      }\n    }\n    const upItems = upIndexes.map(i => this.viewItems[i]);\n    const upSizes = upIndexes.map(i => sizes[i]);\n    const downItems = downIndexes.map(i => this.viewItems[i]);\n    const downSizes = downIndexes.map(i => sizes[i]);\n    const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n    const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n    const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n    const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n    const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n    const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n    let snapped = false;\n    if (snapBefore) {\n      const snapView = this.viewItems[snapBefore.index];\n      const visible = delta >= snapBefore.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapBefore.size);\n    }\n    if (!snapped && snapAfter) {\n      const snapView = this.viewItems[snapAfter.index];\n      const visible = delta < snapAfter.limitDelta;\n      snapped = visible !== snapView.visible;\n      snapView.setVisible(visible, snapAfter.size);\n    }\n    if (snapped) {\n      return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n    }\n    delta = clamp(delta, minDelta, maxDelta);\n    for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n      const item = upItems[i];\n      const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n      const viewDelta = size - upSizes[i];\n      deltaUp -= viewDelta;\n      item.size = size;\n    }\n    for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n      const item = downItems[i];\n      const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n      const viewDelta = size - downSizes[i];\n      deltaDown += viewDelta;\n      item.size = size;\n    }\n    return delta;\n  }\n  distributeEmptySpace(lowPriorityIndex) {\n    const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    let emptyDelta = this.size - contentSize;\n    const indexes = range(this.viewItems.length - 1, -1);\n    const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n    const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n    for (const index of highPriorityIndexes) {\n      pushToStart(indexes, index);\n    }\n    for (const index of lowPriorityIndexes) {\n      pushToEnd(indexes, index);\n    }\n    if (typeof lowPriorityIndex === 'number') {\n      pushToEnd(indexes, lowPriorityIndex);\n    }\n    for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n      const item = this.viewItems[indexes[i]];\n      const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n      const viewDelta = size - item.size;\n      emptyDelta -= viewDelta;\n      item.size = size;\n    }\n  }\n  layoutViews() {\n    // Save new content size\n    this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n    // Layout views\n    let offset = 0;\n    for (const viewItem of this.viewItems) {\n      viewItem.layout(offset, this.layoutContext);\n      offset += viewItem.size;\n    }\n    // Layout sashes\n    this.sashItems.forEach(item => item.sash.layout());\n    this.updateSashEnablement();\n    this.updateScrollableElement();\n  }\n  updateScrollableElement() {\n    if (this.orientation === 0 /* Orientation.VERTICAL */) {\n      this.scrollableElement.setScrollDimensions({\n        height: this.size,\n        scrollHeight: this._contentSize\n      });\n    } else {\n      this.scrollableElement.setScrollDimensions({\n        width: this.size,\n        scrollWidth: this._contentSize\n      });\n    }\n  }\n  updateSashEnablement() {\n    let previous = false;\n    const collapsesDown = this.viewItems.map(i => previous = i.size - i.minimumSize > 0 || previous);\n    previous = false;\n    const expandsDown = this.viewItems.map(i => previous = i.maximumSize - i.size > 0 || previous);\n    const reverseViews = [...this.viewItems].reverse();\n    previous = false;\n    const collapsesUp = reverseViews.map(i => previous = i.size - i.minimumSize > 0 || previous).reverse();\n    previous = false;\n    const expandsUp = reverseViews.map(i => previous = i.maximumSize - i.size > 0 || previous).reverse();\n    let position = 0;\n    for (let index = 0; index < this.sashItems.length; index++) {\n      const {\n        sash\n      } = this.sashItems[index];\n      const viewItem = this.viewItems[index];\n      position += viewItem.size;\n      const min = !(collapsesDown[index] && expandsUp[index + 1]);\n      const max = !(expandsDown[index] && collapsesUp[index + 1]);\n      if (min && max) {\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n        const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n        const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n        const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n        if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n          sash.state = 1 /* SashState.AtMinimum */;\n        } else if (snappedAfter && collapsesDown[index] && (position < this._contentSize || this.endSnappingEnabled)) {\n          sash.state = 2 /* SashState.AtMaximum */;\n        } else {\n          sash.state = 0 /* SashState.Disabled */;\n        }\n      } else if (min && !max) {\n        sash.state = 1 /* SashState.AtMinimum */;\n      } else if (!min && max) {\n        sash.state = 2 /* SashState.AtMaximum */;\n      } else {\n        sash.state = 3 /* SashState.Enabled */;\n      }\n    }\n  }\n  getSashPosition(sash) {\n    let position = 0;\n    for (let i = 0; i < this.sashItems.length; i++) {\n      position += this.viewItems[i].size;\n      if (this.sashItems[i].sash === sash) {\n        return position;\n      }\n    }\n    return 0;\n  }\n  findFirstSnapIndex(indexes) {\n    // visible views first\n    for (const index of indexes) {\n      const viewItem = this.viewItems[index];\n      if (!viewItem.visible) {\n        continue;\n      }\n      if (viewItem.snap) {\n        return index;\n      }\n    }\n    // then, hidden views\n    for (const index of indexes) {\n      const viewItem = this.viewItems[index];\n      if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n        return undefined;\n      }\n      if (!viewItem.visible && viewItem.snap) {\n        return index;\n      }\n    }\n    return undefined;\n  }\n  areViewsDistributed() {\n    let min = undefined,\n      max = undefined;\n    for (const view of this.viewItems) {\n      min = min === undefined ? view.size : Math.min(min, view.size);\n      max = max === undefined ? view.size : Math.max(max, view.size);\n      if (max - min > 2) {\n        return false;\n      }\n    }\n    return true;\n  }\n  dispose() {\n    this.sashDragState?.disposable.dispose();\n    dispose(this.viewItems);\n    this.viewItems = [];\n    this.sashItems.forEach(i => i.disposable.dispose());\n    this.sashItems = [];\n    super.dispose();\n  }\n}","map":{"version":3,"names":["$","addDisposableListener","append","getWindow","scheduleAtNextAnimationFrame","DomEmitter","Sash","SmoothScrollableElement","pushToEnd","pushToStart","range","Color","Emitter","Event","combinedDisposable","Disposable","dispose","toDisposable","clamp","Scrollable","types","defaultStyles","separatorBorder","transparent","ViewItem","size","_size","visible","_cachedVisibleSize","setVisible","viewMinimumSize","viewMaximumSize","undefined","container","classList","toggle","view","e","console","error","minimumSize","maximumSize","priority","proportionalLayout","snap","enabled","style","pointerEvents","constructor","disposable","add","cachedVisibleSize","layout","offset","layoutContext","layoutContainer","VerticalViewItem","top","height","HorizontalViewItem","left","width","State","Sizing","Distribute","type","Split","index","Auto","Invisible","SplitView","orthogonalStartSash","_orthogonalStartSash","orthogonalEndSash","_orthogonalEndSash","startSnappingEnabled","_startSnappingEnabled","endSnappingEnabled","_endSnappingEnabled","sash","sashItem","sashItems","updateSashEnablement","options","_contentSize","proportions","viewItems","state","Idle","_onDidSashChange","_register","_onDidSashReset","onDidSashChange","event","onDidSashReset","orientation","inverseAltBehavior","getSashOrthogonalSize","el","document","createElement","appendChild","sashContainer","viewContainer","scrollable","forceIntegerValues","smoothScrollDuration","callback","scrollableElement","vertical","scrollbarVisibility","horizontal","onDidScrollViewContainer","_","position","getScrollPosition","scrollLeft","Math","abs","scrollTop","setScrollPosition","onDidScroll","onScroll","scrollTopChanged","scrollLeftChanged","getDomNode","styles","descriptor","views","forEach","viewDescriptor","sizing","isUndefined","doAddView","reduce","r","i","saveProportions","isTransparent","remove","removeProperty","setProperty","toString","addView","length","skipLayout","previousSize","max","indexes","lowPriorityIndexes","filter","highPriorityIndexes","resize","total","item","proportion","round","distributeEmptySpace","layoutViews","map","v","onSashStart","start","alt","findIndex","ownerDocument","body","resetSashDragState","sashDragState","current","altKey","sizes","minDelta","Number","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","isLastSash","viewItem","snapBefore","snapAfter","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","min","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","floor","limitDelta","onSashChange","delta","newDelta","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","onSashEnd","fire","onViewChange","indexOf","relayout","resizeView","Error","Busy","distributeViewSizes","flexibleViewItems","flexibleSize","push","getViewSize","insertBefore","children","onChangeDisposable","onDidChange","containerDisposable","viewSize","areViewsDistributed","splice","opts","getHorizontalSashTop","s","getSashPosition","getHorizontalSashWidth","getVerticalSashLeft","getVerticalSashHeight","sashEventMapper","startY","currentY","startX","currentX","onStart","onDidStart","onStartDisposable","onChange","onEnd","onDidEnd","onEndDisposable","onDidResetDisposable","onDidReset","element","contentSize","overloadMinDelta","overloadMaxDelta","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","viewDelta","deltaDown","lowPriorityIndex","emptyDelta","updateScrollableElement","setScrollDimensions","scrollHeight","scrollWidth","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","snappedBefore","snappedAfter"],"sources":["P:/IDEA/JudgeX/JudgeX_front/node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, getWindow, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        try {\n            this.view.setVisible?.(visible);\n        }\n        catch (e) {\n            console.error('Splitview: Failed to set visible view');\n            console.error(e);\n        }\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get proportionalLayout() { return this.view.proportionalLayout ?? true; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        try {\n            this.view.layout(this.size, offset, layoutContext);\n        }\n        catch (e) {\n            console.error('Splitview: Failed to layout view');\n            console.error(e);\n        }\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding a view, use DistributeSizing when all pre-existing views are\n     * distributed evenly, otherwise use SplitSizing.\n     */\n    function Auto(index) { return { type: 'auto', index }; }\n    Sizing.Auto = Auto;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        super();\n        this.size = 0;\n        this._contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = []; // used in tests\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = options.orientation ?? 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = options.inverseAltBehavior ?? false;\n        this.proportionalLayout = options.proportionalLayout ?? true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = this._register(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame: callback => scheduleAtNextAnimationFrame(getWindow(this.el), callback),\n        }));\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? (options.scrollbarVisibility ?? 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? (options.scrollbarVisibility ?? 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        // https://github.com/microsoft/vscode/issues/157737\n        const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n        this._register(onDidScrollViewContainer(_ => {\n            const position = this.scrollableElement.getScrollPosition();\n            const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n            const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n            if (scrollLeft !== undefined || scrollTop !== undefined) {\n                this.scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n            }\n        }));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            if (e.scrollTopChanged) {\n                this.viewContainer.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this.viewContainer.scrollLeft = e.scrollLeft;\n            }\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this._contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number' && total > 0) {\n                    item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this._contentSize > 0) {\n            this.proportions = this.viewItems.map(v => v.proportionalLayout && v.visible ? v.size / this._contentSize : undefined);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(this.el.ownerDocument.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(this.el.ownerDocument.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        try {\n            const indexes = range(this.viewItems.length).filter(i => i !== index);\n            const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            const item = this.viewItems[index];\n            size = Math.round(size);\n            size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n            item.size = size;\n            this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        }\n        finally {\n            this.state = State.Idle;\n        }\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        try {\n            // Add view\n            const container = $('.split-view-view');\n            if (index === this.viewItems.length) {\n                this.viewContainer.appendChild(container);\n            }\n            else {\n                this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n            }\n            const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n            const containerDisposable = toDisposable(() => container.remove());\n            const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n            let viewSize;\n            if (typeof size === 'number') {\n                viewSize = size;\n            }\n            else {\n                if (size.type === 'auto') {\n                    if (this.areViewsDistributed()) {\n                        size = { type: 'distribute' };\n                    }\n                    else {\n                        size = { type: 'split', index: size.index };\n                    }\n                }\n                if (size.type === 'split') {\n                    viewSize = this.getViewSize(size.index) / 2;\n                }\n                else if (size.type === 'invisible') {\n                    viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n                }\n                else {\n                    viewSize = view.minimumSize;\n                }\n            }\n            const item = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new VerticalViewItem(container, view, viewSize, disposable)\n                : new HorizontalViewItem(container, view, viewSize, disposable);\n            this.viewItems.splice(index, 0, item);\n            // Add sash\n            if (this.viewItems.length > 1) {\n                const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n                const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                    ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, { ...opts, orientation: 1 /* Orientation.HORIZONTAL */ })\n                    : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, { ...opts, orientation: 0 /* Orientation.VERTICAL */ });\n                const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                    ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                    : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n                const onStart = Event.map(sash.onDidStart, sashEventMapper);\n                const onStartDisposable = onStart(this.onSashStart, this);\n                const onChange = Event.map(sash.onDidChange, sashEventMapper);\n                const onChangeDisposable = onChange(this.onSashChange, this);\n                const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n                const onEndDisposable = onEnd(this.onSashEnd, this);\n                const onDidResetDisposable = sash.onDidReset(() => {\n                    const index = this.sashItems.findIndex(item => item.sash === sash);\n                    const upIndexes = range(index, -1);\n                    const downIndexes = range(index + 1, this.viewItems.length);\n                    const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                    const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                    if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                        return;\n                    }\n                    if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                        return;\n                    }\n                    this._onDidSashReset.fire(index);\n                });\n                const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n                const sashItem = { sash, disposable };\n                this.sashItems.splice(index - 1, 0, sashItem);\n            }\n            container.appendChild(view.element);\n            let highPriorityIndexes;\n            if (typeof size !== 'number' && size.type === 'split') {\n                highPriorityIndexes = [size.index];\n            }\n            if (!skipLayout) {\n                this.relayout([index], highPriorityIndexes);\n            }\n            if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n                this.distributeViewSizes();\n            }\n        }\n        finally {\n            this.state = State.Idle;\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this._contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this._contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this._contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    areViewsDistributed() {\n        let min = undefined, max = undefined;\n        for (const view of this.viewItems) {\n            min = min === undefined ? view.size : Math.min(min, view.size);\n            max = max === undefined ? view.size : Math.max(max, view.size);\n            if (max - min > 2) {\n                return false;\n            }\n        }\n        return true;\n    }\n    dispose() {\n        this.sashDragState?.disposable.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n        super.dispose();\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}