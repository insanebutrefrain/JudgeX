{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { computed, reactive, watch, ref } from \"vue\";\nimport { getOptionInfos, getValidOptions, isValidOption } from \"../utils.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nconst DEFAULT_FIELD_NAMES = {\n  value: \"value\",\n  label: \"label\",\n  disabled: \"disabled\",\n  tagProps: \"tagProps\",\n  render: \"render\"\n};\nconst useOptions = ({\n  options,\n  extraOptions,\n  inputValue,\n  filterOption,\n  showExtraOptions,\n  valueKey,\n  fieldNames\n}) => {\n  const mergedFieldNames = computed(() => ({\n    ...DEFAULT_FIELD_NAMES,\n    ...(fieldNames == null ? void 0 : fieldNames.value)\n  }));\n  const slotOptionInfoMap = reactive(/* @__PURE__ */new Map());\n  const sortedSlotOptionInfos = computed(() => Array.from(slotOptionInfoMap.values()).sort((a, b) => {\n    if (isNumber(a.index) && isNumber(b.index)) {\n      return a.index - b.index;\n    }\n    return 0;\n  }));\n  const propOptionData = computed(() => {\n    var _a, _b;\n    const optionInfoMap2 = /* @__PURE__ */new Map();\n    const optionInfos = getOptionInfos((_a = options == null ? void 0 : options.value) != null ? _a : [], {\n      valueKey: (_b = valueKey == null ? void 0 : valueKey.value) != null ? _b : \"value\",\n      fieldNames: mergedFieldNames.value,\n      origin: \"options\",\n      optionInfoMap: optionInfoMap2\n    });\n    return {\n      optionInfos,\n      optionInfoMap: optionInfoMap2\n    };\n  });\n  const extraOptionData = computed(() => {\n    var _a, _b;\n    const optionInfoMap2 = /* @__PURE__ */new Map();\n    const optionInfos = getOptionInfos((_a = extraOptions == null ? void 0 : extraOptions.value) != null ? _a : [], {\n      valueKey: (_b = valueKey == null ? void 0 : valueKey.value) != null ? _b : \"value\",\n      fieldNames: mergedFieldNames.value,\n      origin: \"extraOptions\",\n      optionInfoMap: optionInfoMap2\n    });\n    return {\n      optionInfos,\n      optionInfoMap: optionInfoMap2\n    };\n  });\n  const optionInfoMap = reactive(/* @__PURE__ */new Map());\n  watch([sortedSlotOptionInfos, options != null ? options : ref([]), extraOptions != null ? extraOptions : ref([]), valueKey != null ? valueKey : ref(\"value\")], () => {\n    optionInfoMap.clear();\n    sortedSlotOptionInfos.value.forEach((info, index) => {\n      optionInfoMap.set(info.key, {\n        ...info,\n        index\n      });\n    });\n    propOptionData.value.optionInfoMap.forEach(info => {\n      if (!optionInfoMap.has(info.key)) {\n        info.index = optionInfoMap.size;\n        optionInfoMap.set(info.key, info);\n      }\n    });\n    extraOptionData.value.optionInfoMap.forEach(info => {\n      if (!optionInfoMap.has(info.key)) {\n        info.index = optionInfoMap.size;\n        optionInfoMap.set(info.key, info);\n      }\n    });\n  }, {\n    immediate: true,\n    deep: true\n  });\n  const validOptions = computed(() => {\n    var _a;\n    const options2 = getValidOptions(propOptionData.value.optionInfos, {\n      inputValue: inputValue == null ? void 0 : inputValue.value,\n      filterOption: filterOption == null ? void 0 : filterOption.value\n    });\n    if ((_a = showExtraOptions == null ? void 0 : showExtraOptions.value) != null ? _a : true) {\n      options2.push(...getValidOptions(extraOptionData.value.optionInfos, {\n        inputValue: inputValue == null ? void 0 : inputValue.value,\n        filterOption: filterOption == null ? void 0 : filterOption.value\n      }));\n    }\n    return options2;\n  });\n  const validOptionInfos = computed(() => Array.from(optionInfoMap.values()).filter(optionInfo => {\n    if (optionInfo.origin === \"extraOptions\" && (showExtraOptions == null ? void 0 : showExtraOptions.value) === false) {\n      return false;\n    }\n    return isValidOption(optionInfo, {\n      inputValue: inputValue == null ? void 0 : inputValue.value,\n      filterOption: filterOption == null ? void 0 : filterOption.value\n    });\n  }));\n  const enabledOptionKeys = computed(() => validOptionInfos.value.filter(optionInfo => !optionInfo.disabled).map(info => info.key));\n  const getNextSlotOptionIndex = () => slotOptionInfoMap.size;\n  const addSlotOptionInfo = (id, optionInfo) => {\n    slotOptionInfoMap.set(id, optionInfo);\n  };\n  const removeSlotOptionInfo = id => {\n    slotOptionInfoMap.delete(id);\n  };\n  return {\n    validOptions,\n    optionInfoMap,\n    validOptionInfos,\n    enabledOptionKeys,\n    getNextSlotOptionIndex,\n    addSlotOptionInfo,\n    removeSlotOptionInfo\n  };\n};\nexport { useOptions };","map":{"version":3,"names":["computed","reactive","watch","ref","getOptionInfos","getValidOptions","isValidOption","isNumber","DEFAULT_FIELD_NAMES","value","label","disabled","tagProps","render","useOptions","options","extraOptions","inputValue","filterOption","showExtraOptions","valueKey","fieldNames","mergedFieldNames","slotOptionInfoMap","Map","sortedSlotOptionInfos","Array","from","values","sort","a","b","index","propOptionData","_a","_b","optionInfoMap2","optionInfos","origin","optionInfoMap","extraOptionData","clear","forEach","info","set","key","has","size","immediate","deep","validOptions","options2","push","validOptionInfos","filter","optionInfo","enabledOptionKeys","map","getNextSlotOptionIndex","addSlotOptionInfo","id","removeSlotOptionInfo","delete"],"sources":["P:/IDEA/JudgeX/judgex_front/node_modules/@arco-design/web-vue/es/select/hooks/use-options.js"],"sourcesContent":["import { computed, reactive, watch, ref } from \"vue\";\nimport { getOptionInfos, getValidOptions, isValidOption } from \"../utils.js\";\nimport { isNumber } from \"../../_utils/is.js\";\nconst DEFAULT_FIELD_NAMES = {\n  value: \"value\",\n  label: \"label\",\n  disabled: \"disabled\",\n  tagProps: \"tagProps\",\n  render: \"render\"\n};\nconst useOptions = ({\n  options,\n  extraOptions,\n  inputValue,\n  filterOption,\n  showExtraOptions,\n  valueKey,\n  fieldNames\n}) => {\n  const mergedFieldNames = computed(() => ({\n    ...DEFAULT_FIELD_NAMES,\n    ...fieldNames == null ? void 0 : fieldNames.value\n  }));\n  const slotOptionInfoMap = reactive(/* @__PURE__ */ new Map());\n  const sortedSlotOptionInfos = computed(\n    () => Array.from(slotOptionInfoMap.values()).sort((a, b) => {\n      if (isNumber(a.index) && isNumber(b.index)) {\n        return a.index - b.index;\n      }\n      return 0;\n    })\n  );\n  const propOptionData = computed(() => {\n    var _a, _b;\n    const optionInfoMap2 = /* @__PURE__ */ new Map();\n    const optionInfos = getOptionInfos((_a = options == null ? void 0 : options.value) != null ? _a : [], {\n      valueKey: (_b = valueKey == null ? void 0 : valueKey.value) != null ? _b : \"value\",\n      fieldNames: mergedFieldNames.value,\n      origin: \"options\",\n      optionInfoMap: optionInfoMap2\n    });\n    return {\n      optionInfos,\n      optionInfoMap: optionInfoMap2\n    };\n  });\n  const extraOptionData = computed(() => {\n    var _a, _b;\n    const optionInfoMap2 = /* @__PURE__ */ new Map();\n    const optionInfos = getOptionInfos((_a = extraOptions == null ? void 0 : extraOptions.value) != null ? _a : [], {\n      valueKey: (_b = valueKey == null ? void 0 : valueKey.value) != null ? _b : \"value\",\n      fieldNames: mergedFieldNames.value,\n      origin: \"extraOptions\",\n      optionInfoMap: optionInfoMap2\n    });\n    return {\n      optionInfos,\n      optionInfoMap: optionInfoMap2\n    };\n  });\n  const optionInfoMap = reactive(/* @__PURE__ */ new Map());\n  watch(\n    [\n      sortedSlotOptionInfos,\n      options != null ? options : ref([]),\n      extraOptions != null ? extraOptions : ref([]),\n      valueKey != null ? valueKey : ref(\"value\")\n    ],\n    () => {\n      optionInfoMap.clear();\n      sortedSlotOptionInfos.value.forEach((info, index) => {\n        optionInfoMap.set(info.key, { ...info, index });\n      });\n      propOptionData.value.optionInfoMap.forEach((info) => {\n        if (!optionInfoMap.has(info.key)) {\n          info.index = optionInfoMap.size;\n          optionInfoMap.set(info.key, info);\n        }\n      });\n      extraOptionData.value.optionInfoMap.forEach((info) => {\n        if (!optionInfoMap.has(info.key)) {\n          info.index = optionInfoMap.size;\n          optionInfoMap.set(info.key, info);\n        }\n      });\n    },\n    { immediate: true, deep: true }\n  );\n  const validOptions = computed(() => {\n    var _a;\n    const options2 = getValidOptions(propOptionData.value.optionInfos, {\n      inputValue: inputValue == null ? void 0 : inputValue.value,\n      filterOption: filterOption == null ? void 0 : filterOption.value\n    });\n    if ((_a = showExtraOptions == null ? void 0 : showExtraOptions.value) != null ? _a : true) {\n      options2.push(\n        ...getValidOptions(extraOptionData.value.optionInfos, {\n          inputValue: inputValue == null ? void 0 : inputValue.value,\n          filterOption: filterOption == null ? void 0 : filterOption.value\n        })\n      );\n    }\n    return options2;\n  });\n  const validOptionInfos = computed(\n    () => Array.from(optionInfoMap.values()).filter((optionInfo) => {\n      if (optionInfo.origin === \"extraOptions\" && (showExtraOptions == null ? void 0 : showExtraOptions.value) === false) {\n        return false;\n      }\n      return isValidOption(optionInfo, {\n        inputValue: inputValue == null ? void 0 : inputValue.value,\n        filterOption: filterOption == null ? void 0 : filterOption.value\n      });\n    })\n  );\n  const enabledOptionKeys = computed(\n    () => validOptionInfos.value.filter((optionInfo) => !optionInfo.disabled).map((info) => info.key)\n  );\n  const getNextSlotOptionIndex = () => slotOptionInfoMap.size;\n  const addSlotOptionInfo = (id, optionInfo) => {\n    slotOptionInfoMap.set(id, optionInfo);\n  };\n  const removeSlotOptionInfo = (id) => {\n    slotOptionInfoMap.delete(id);\n  };\n  return {\n    validOptions,\n    optionInfoMap,\n    validOptionInfos,\n    enabledOptionKeys,\n    getNextSlotOptionIndex,\n    addSlotOptionInfo,\n    removeSlotOptionInfo\n  };\n};\nexport { useOptions };\n"],"mappings":";;;;;AAAA,SAASA,QAAQ,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,GAAG,QAAQ,KAAK;AACpD,SAASC,cAAc,EAAEC,eAAe,EAAEC,aAAa,QAAQ,aAAa;AAC5E,SAASC,QAAQ,QAAQ,oBAAoB;AAC7C,MAAMC,mBAAmB,GAAG;EAC1BC,KAAK,EAAE,OAAO;EACdC,KAAK,EAAE,OAAO;EACdC,QAAQ,EAAE,UAAU;EACpBC,QAAQ,EAAE,UAAU;EACpBC,MAAM,EAAE;AACV,CAAC;AACD,MAAMC,UAAU,GAAGA,CAAC;EAClBC,OAAO;EACPC,YAAY;EACZC,UAAU;EACVC,YAAY;EACZC,gBAAgB;EAChBC,QAAQ;EACRC;AACF,CAAC,KAAK;EACJ,MAAMC,gBAAgB,GAAGtB,QAAQ,CAAC,OAAO;IACvC,GAAGQ,mBAAmB;IACtB,IAAGa,UAAU,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACZ,KAAK;EACnD,CAAC,CAAC,CAAC;EACH,MAAMc,iBAAiB,GAAGtB,QAAQ,CAAC,eAAgB,IAAIuB,GAAG,CAAC,CAAC,CAAC;EAC7D,MAAMC,qBAAqB,GAAGzB,QAAQ,CACpC,MAAM0B,KAAK,CAACC,IAAI,CAACJ,iBAAiB,CAACK,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;IAC1D,IAAIxB,QAAQ,CAACuB,CAAC,CAACE,KAAK,CAAC,IAAIzB,QAAQ,CAACwB,CAAC,CAACC,KAAK,CAAC,EAAE;MAC1C,OAAOF,CAAC,CAACE,KAAK,GAAGD,CAAC,CAACC,KAAK;IAC1B;IACA,OAAO,CAAC;EACV,CAAC,CACH,CAAC;EACD,MAAMC,cAAc,GAAGjC,QAAQ,CAAC,MAAM;IACpC,IAAIkC,EAAE,EAAEC,EAAE;IACV,MAAMC,cAAc,GAAG,eAAgB,IAAIZ,GAAG,CAAC,CAAC;IAChD,MAAMa,WAAW,GAAGjC,cAAc,CAAC,CAAC8B,EAAE,GAAGnB,OAAO,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACN,KAAK,KAAK,IAAI,GAAGyB,EAAE,GAAG,EAAE,EAAE;MACpGd,QAAQ,EAAE,CAACe,EAAE,GAAGf,QAAQ,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACX,KAAK,KAAK,IAAI,GAAG0B,EAAE,GAAG,OAAO;MAClFd,UAAU,EAAEC,gBAAgB,CAACb,KAAK;MAClC6B,MAAM,EAAE,SAAS;MACjBC,aAAa,EAAEH;IACjB,CAAC,CAAC;IACF,OAAO;MACLC,WAAW;MACXE,aAAa,EAAEH;IACjB,CAAC;EACH,CAAC,CAAC;EACF,MAAMI,eAAe,GAAGxC,QAAQ,CAAC,MAAM;IACrC,IAAIkC,EAAE,EAAEC,EAAE;IACV,MAAMC,cAAc,GAAG,eAAgB,IAAIZ,GAAG,CAAC,CAAC;IAChD,MAAMa,WAAW,GAAGjC,cAAc,CAAC,CAAC8B,EAAE,GAAGlB,YAAY,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACP,KAAK,KAAK,IAAI,GAAGyB,EAAE,GAAG,EAAE,EAAE;MAC9Gd,QAAQ,EAAE,CAACe,EAAE,GAAGf,QAAQ,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACX,KAAK,KAAK,IAAI,GAAG0B,EAAE,GAAG,OAAO;MAClFd,UAAU,EAAEC,gBAAgB,CAACb,KAAK;MAClC6B,MAAM,EAAE,cAAc;MACtBC,aAAa,EAAEH;IACjB,CAAC,CAAC;IACF,OAAO;MACLC,WAAW;MACXE,aAAa,EAAEH;IACjB,CAAC;EACH,CAAC,CAAC;EACF,MAAMG,aAAa,GAAGtC,QAAQ,CAAC,eAAgB,IAAIuB,GAAG,CAAC,CAAC,CAAC;EACzDtB,KAAK,CACH,CACEuB,qBAAqB,EACrBV,OAAO,IAAI,IAAI,GAAGA,OAAO,GAAGZ,GAAG,CAAC,EAAE,CAAC,EACnCa,YAAY,IAAI,IAAI,GAAGA,YAAY,GAAGb,GAAG,CAAC,EAAE,CAAC,EAC7CiB,QAAQ,IAAI,IAAI,GAAGA,QAAQ,GAAGjB,GAAG,CAAC,OAAO,CAAC,CAC3C,EACD,MAAM;IACJoC,aAAa,CAACE,KAAK,CAAC,CAAC;IACrBhB,qBAAqB,CAAChB,KAAK,CAACiC,OAAO,CAAC,CAACC,IAAI,EAAEX,KAAK,KAAK;MACnDO,aAAa,CAACK,GAAG,CAACD,IAAI,CAACE,GAAG,EAAE;QAAE,GAAGF,IAAI;QAAEX;MAAM,CAAC,CAAC;IACjD,CAAC,CAAC;IACFC,cAAc,CAACxB,KAAK,CAAC8B,aAAa,CAACG,OAAO,CAAEC,IAAI,IAAK;MACnD,IAAI,CAACJ,aAAa,CAACO,GAAG,CAACH,IAAI,CAACE,GAAG,CAAC,EAAE;QAChCF,IAAI,CAACX,KAAK,GAAGO,aAAa,CAACQ,IAAI;QAC/BR,aAAa,CAACK,GAAG,CAACD,IAAI,CAACE,GAAG,EAAEF,IAAI,CAAC;MACnC;IACF,CAAC,CAAC;IACFH,eAAe,CAAC/B,KAAK,CAAC8B,aAAa,CAACG,OAAO,CAAEC,IAAI,IAAK;MACpD,IAAI,CAACJ,aAAa,CAACO,GAAG,CAACH,IAAI,CAACE,GAAG,CAAC,EAAE;QAChCF,IAAI,CAACX,KAAK,GAAGO,aAAa,CAACQ,IAAI;QAC/BR,aAAa,CAACK,GAAG,CAACD,IAAI,CAACE,GAAG,EAAEF,IAAI,CAAC;MACnC;IACF,CAAC,CAAC;EACJ,CAAC,EACD;IAAEK,SAAS,EAAE,IAAI;IAAEC,IAAI,EAAE;EAAK,CAChC,CAAC;EACD,MAAMC,YAAY,GAAGlD,QAAQ,CAAC,MAAM;IAClC,IAAIkC,EAAE;IACN,MAAMiB,QAAQ,GAAG9C,eAAe,CAAC4B,cAAc,CAACxB,KAAK,CAAC4B,WAAW,EAAE;MACjEpB,UAAU,EAAEA,UAAU,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACR,KAAK;MAC1DS,YAAY,EAAEA,YAAY,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACT;IAC7D,CAAC,CAAC;IACF,IAAI,CAACyB,EAAE,GAAGf,gBAAgB,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,gBAAgB,CAACV,KAAK,KAAK,IAAI,GAAGyB,EAAE,GAAG,IAAI,EAAE;MACzFiB,QAAQ,CAACC,IAAI,CACX,GAAG/C,eAAe,CAACmC,eAAe,CAAC/B,KAAK,CAAC4B,WAAW,EAAE;QACpDpB,UAAU,EAAEA,UAAU,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACR,KAAK;QAC1DS,YAAY,EAAEA,YAAY,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACT;MAC7D,CAAC,CACH,CAAC;IACH;IACA,OAAO0C,QAAQ;EACjB,CAAC,CAAC;EACF,MAAME,gBAAgB,GAAGrD,QAAQ,CAC/B,MAAM0B,KAAK,CAACC,IAAI,CAACY,aAAa,CAACX,MAAM,CAAC,CAAC,CAAC,CAAC0B,MAAM,CAAEC,UAAU,IAAK;IAC9D,IAAIA,UAAU,CAACjB,MAAM,KAAK,cAAc,IAAI,CAACnB,gBAAgB,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,gBAAgB,CAACV,KAAK,MAAM,KAAK,EAAE;MAClH,OAAO,KAAK;IACd;IACA,OAAOH,aAAa,CAACiD,UAAU,EAAE;MAC/BtC,UAAU,EAAEA,UAAU,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,UAAU,CAACR,KAAK;MAC1DS,YAAY,EAAEA,YAAY,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,YAAY,CAACT;IAC7D,CAAC,CAAC;EACJ,CAAC,CACH,CAAC;EACD,MAAM+C,iBAAiB,GAAGxD,QAAQ,CAChC,MAAMqD,gBAAgB,CAAC5C,KAAK,CAAC6C,MAAM,CAAEC,UAAU,IAAK,CAACA,UAAU,CAAC5C,QAAQ,CAAC,CAAC8C,GAAG,CAAEd,IAAI,IAAKA,IAAI,CAACE,GAAG,CAClG,CAAC;EACD,MAAMa,sBAAsB,GAAGA,CAAA,KAAMnC,iBAAiB,CAACwB,IAAI;EAC3D,MAAMY,iBAAiB,GAAGA,CAACC,EAAE,EAAEL,UAAU,KAAK;IAC5ChC,iBAAiB,CAACqB,GAAG,CAACgB,EAAE,EAAEL,UAAU,CAAC;EACvC,CAAC;EACD,MAAMM,oBAAoB,GAAID,EAAE,IAAK;IACnCrC,iBAAiB,CAACuC,MAAM,CAACF,EAAE,CAAC;EAC9B,CAAC;EACD,OAAO;IACLV,YAAY;IACZX,aAAa;IACbc,gBAAgB;IAChBG,iBAAiB;IACjBE,sBAAsB;IACtBC,iBAAiB;IACjBE;EACF,CAAC;AACH,CAAC;AACD,SAAS/C,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}