{"ast":null,"code":"var _DecorationsManager;\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.set.difference.v2.js\";\nimport \"core-js/modules/es.set.intersection.v2.js\";\nimport \"core-js/modules/es.set.is-disjoint-from.v2.js\";\nimport \"core-js/modules/es.set.is-subset-of.v2.js\";\nimport \"core-js/modules/es.set.is-superset-of.v2.js\";\nimport \"core-js/modules/es.set.symmetric-difference.v2.js\";\nimport \"core-js/modules/es.set.union.v2.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n  constructor(_editor, _model) {\n    this._editor = _editor;\n    this._model = _model;\n    this._decorations = new Map();\n    this._decorationIgnoreSet = new Set();\n    this._callOnDispose = new DisposableStore();\n    this._callOnModelChange = new DisposableStore();\n    this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n    this._onModelChanged();\n  }\n  dispose() {\n    this._callOnModelChange.dispose();\n    this._callOnDispose.dispose();\n    this.removeDecorations();\n  }\n  _onModelChanged() {\n    this._callOnModelChange.clear();\n    const model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    for (const ref of this._model.references) {\n      if (ref.uri.toString() === model.uri.toString()) {\n        this._addDecorations(ref.parent);\n        return;\n      }\n    }\n  }\n  _addDecorations(reference) {\n    if (!this._editor.hasModel()) {\n      return;\n    }\n    this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n    const newDecorations = [];\n    const newDecorationsActualIndex = [];\n    for (let i = 0, len = reference.children.length; i < len; i++) {\n      const oneReference = reference.children[i];\n      if (this._decorationIgnoreSet.has(oneReference.id)) {\n        continue;\n      }\n      if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n        continue;\n      }\n      newDecorations.push({\n        range: oneReference.range,\n        options: DecorationsManager.DecorationOptions\n      });\n      newDecorationsActualIndex.push(i);\n    }\n    this._editor.changeDecorations(changeAccessor => {\n      const decorations = changeAccessor.deltaDecorations([], newDecorations);\n      for (let i = 0; i < decorations.length; i++) {\n        this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n      }\n    });\n  }\n  _onDecorationChanged() {\n    const toRemove = [];\n    const model = this._editor.getModel();\n    if (!model) {\n      return;\n    }\n    for (const [decorationId, reference] of this._decorations) {\n      const newRange = model.getDecorationRange(decorationId);\n      if (!newRange) {\n        continue;\n      }\n      let ignore = false;\n      if (Range.equalsRange(newRange, reference.range)) {\n        continue;\n      }\n      if (Range.spansMultipleLines(newRange)) {\n        ignore = true;\n      } else {\n        const lineLength = reference.range.endColumn - reference.range.startColumn;\n        const newLineLength = newRange.endColumn - newRange.startColumn;\n        if (lineLength !== newLineLength) {\n          ignore = true;\n        }\n      }\n      if (ignore) {\n        this._decorationIgnoreSet.add(reference.id);\n        toRemove.push(decorationId);\n      } else {\n        reference.range = newRange;\n      }\n    }\n    for (let i = 0, len = toRemove.length; i < len; i++) {\n      this._decorations.delete(toRemove[i]);\n    }\n    this._editor.removeDecorations(toRemove);\n  }\n  removeDecorations() {\n    this._editor.removeDecorations([...this._decorations.keys()]);\n    this._decorations.clear();\n  }\n}\n_DecorationsManager = DecorationsManager;\n_DecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n  description: 'reference-decoration',\n  stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n  className: 'reference-decoration'\n});\nexport class LayoutData {\n  constructor() {\n    this.ratio = 0.7;\n    this.heightInLines = 18;\n  }\n  static fromJSON(raw) {\n    let ratio;\n    let heightInLines;\n    try {\n      const data = JSON.parse(raw);\n      ratio = data.ratio;\n      heightInLines = data.heightInLines;\n    } catch {\n      //\n    }\n    return {\n      ratio: ratio || 0.7,\n      heightInLines: heightInLines || 18\n    };\n  }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n  constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _keybindingService) {\n    super(editor, {\n      showFrame: false,\n      showArrow: true,\n      isResizeable: true,\n      isAccessible: true,\n      supportOnTitleClick: true\n    }, _instantiationService);\n    this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n    this.layoutData = layoutData;\n    this._textModelResolverService = _textModelResolverService;\n    this._instantiationService = _instantiationService;\n    this._peekViewService = _peekViewService;\n    this._uriLabel = _uriLabel;\n    this._keybindingService = _keybindingService;\n    this._disposeOnNewModel = new DisposableStore();\n    this._callOnDispose = new DisposableStore();\n    this._onDidSelectReference = new Emitter();\n    this.onDidSelectReference = this._onDidSelectReference.event;\n    this._dim = new dom.Dimension(0, 0);\n    this._isClosing = false; // whether or not a dispose is already in progress\n    this._applyTheme(themeService.getColorTheme());\n    this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n    this._peekViewService.addExclusiveWidget(editor, this);\n    this.create();\n  }\n  get isClosing() {\n    return this._isClosing;\n  }\n  dispose() {\n    this._isClosing = true;\n    this.setModel(undefined);\n    this._callOnDispose.dispose();\n    this._disposeOnNewModel.dispose();\n    dispose(this._preview);\n    dispose(this._previewNotAvailableMessage);\n    dispose(this._tree);\n    dispose(this._previewModelReference);\n    this._splitView.dispose();\n    super.dispose();\n  }\n  _applyTheme(theme) {\n    const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n    this.style({\n      arrowColor: borderColor,\n      frameColor: borderColor,\n      headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n      primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n      secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n    });\n  }\n  show(where) {\n    super.show(where, this.layoutData.heightInLines || 18);\n  }\n  focusOnReferenceTree() {\n    this._tree.domFocus();\n  }\n  focusOnPreviewEditor() {\n    this._preview.focus();\n  }\n  isPreviewEditorFocused() {\n    return this._preview.hasTextFocus();\n  }\n  _onTitleClick(e) {\n    if (this._preview && this._preview.getModel()) {\n      this._onDidSelectReference.fire({\n        element: this._getFocusedReference(),\n        kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n        source: 'title'\n      });\n    }\n  }\n  _fillBody(containerElement) {\n    this.setCssClass('reference-zone-widget');\n    // message pane\n    this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n    dom.hide(this._messageContainer);\n    this._splitView = new SplitView(containerElement, {\n      orientation: 1 /* Orientation.HORIZONTAL */\n    });\n    // editor\n    this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n    const options = {\n      scrollBeyondLastLine: false,\n      scrollbar: {\n        verticalScrollbarSize: 14,\n        horizontal: 'auto',\n        useShadows: true,\n        verticalHasArrows: false,\n        horizontalHasArrows: false,\n        alwaysConsumeMouseWheel: true\n      },\n      overviewRulerLanes: 2,\n      fixedOverflowWidgets: true,\n      minimap: {\n        enabled: false\n      }\n    };\n    this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\n    dom.hide(this._previewContainer);\n    this._previewNotAvailableMessage = this._instantiationService.createInstance(TextModel, nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null);\n    // tree\n    this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n    const treeOptions = {\n      keyboardSupport: this._defaultTreeKeyboardSupport,\n      accessibilityProvider: new AccessibilityProvider(),\n      keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n      identityProvider: new IdentityProvider(),\n      openOnSingleClick: true,\n      selectionNavigation: true,\n      overrideStyles: {\n        listBackground: peekView.peekViewResultsBackground\n      }\n    };\n    if (this._defaultTreeKeyboardSupport) {\n      // the tree will consume `Escape` and prevent the widget from closing\n      this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', e => {\n        if (e.equals(9 /* KeyCode.Escape */)) {\n          this._keybindingService.dispatchEvent(e, e.target);\n          e.stopPropagation();\n        }\n      }, true));\n    }\n    this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [this._instantiationService.createInstance(FileReferencesRenderer), this._instantiationService.createInstance(OneReferenceRenderer)], this._instantiationService.createInstance(DataSource), treeOptions);\n    // split stuff\n    this._splitView.addView({\n      onDidChange: Event.None,\n      element: this._previewContainer,\n      minimumSize: 200,\n      maximumSize: Number.MAX_VALUE,\n      layout: width => {\n        this._preview.layout({\n          height: this._dim.height,\n          width\n        });\n      }\n    }, Sizing.Distribute);\n    this._splitView.addView({\n      onDidChange: Event.None,\n      element: this._treeContainer,\n      minimumSize: 100,\n      maximumSize: Number.MAX_VALUE,\n      layout: width => {\n        this._treeContainer.style.height = `${this._dim.height}px`;\n        this._treeContainer.style.width = `${width}px`;\n        this._tree.layout(this._dim.height, width);\n      }\n    }, Sizing.Distribute);\n    this._disposables.add(this._splitView.onDidSashChange(() => {\n      if (this._dim.width) {\n        this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n      }\n    }, undefined));\n    // listen on selection and focus\n    const onEvent = (element, kind) => {\n      if (element instanceof OneReference) {\n        if (kind === 'show') {\n          this._revealReference(element, false);\n        }\n        this._onDidSelectReference.fire({\n          element,\n          kind,\n          source: 'tree'\n        });\n      }\n    };\n    this._disposables.add(this._tree.onDidOpen(e => {\n      if (e.sideBySide) {\n        onEvent(e.element, 'side');\n      } else if (e.editorOptions.pinned) {\n        onEvent(e.element, 'goto');\n      } else {\n        onEvent(e.element, 'show');\n      }\n    }));\n    dom.hide(this._treeContainer);\n  }\n  _onWidth(width) {\n    if (this._dim) {\n      this._doLayoutBody(this._dim.height, width);\n    }\n  }\n  _doLayoutBody(heightInPixel, widthInPixel) {\n    super._doLayoutBody(heightInPixel, widthInPixel);\n    this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n    this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n    this._splitView.layout(widthInPixel);\n    this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n  }\n  setSelection(selection) {\n    return this._revealReference(selection, true).then(() => {\n      if (!this._model) {\n        // disposed\n        return;\n      }\n      // show in tree\n      this._tree.setSelection([selection]);\n      this._tree.setFocus([selection]);\n    });\n  }\n  setModel(newModel) {\n    // clean up\n    this._disposeOnNewModel.clear();\n    this._model = newModel;\n    if (this._model) {\n      return this._onNewModel();\n    }\n    return Promise.resolve();\n  }\n  _onNewModel() {\n    if (!this._model) {\n      return Promise.resolve(undefined);\n    }\n    if (this._model.isEmpty) {\n      this.setTitle('');\n      this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n      dom.show(this._messageContainer);\n      return Promise.resolve(undefined);\n    }\n    dom.hide(this._messageContainer);\n    this._decorationsManager = new DecorationsManager(this._preview, this._model);\n    this._disposeOnNewModel.add(this._decorationsManager);\n    // listen on model changes\n    this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n    // listen on editor\n    this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n      const {\n        event,\n        target\n      } = e;\n      if (event.detail !== 2) {\n        return;\n      }\n      const element = this._getFocusedReference();\n      if (!element) {\n        return;\n      }\n      this._onDidSelectReference.fire({\n        element: {\n          uri: element.uri,\n          range: target.range\n        },\n        kind: event.ctrlKey || event.metaKey || event.altKey ? 'side' : 'open',\n        source: 'editor'\n      });\n    }));\n    // make sure things are rendered\n    this.container.classList.add('results-loaded');\n    dom.show(this._treeContainer);\n    dom.show(this._previewContainer);\n    this._splitView.layout(this._dim.width);\n    this.focusOnReferenceTree();\n    // pick input and a reference to begin with\n    return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n  }\n  _getFocusedReference() {\n    const [element] = this._tree.getFocus();\n    if (element instanceof OneReference) {\n      return element;\n    } else if (element instanceof FileReferences) {\n      if (element.children.length > 0) {\n        return element.children[0];\n      }\n    }\n    return undefined;\n  }\n  async revealReference(reference) {\n    await this._revealReference(reference, false);\n    this._onDidSelectReference.fire({\n      element: reference,\n      kind: 'goto',\n      source: 'tree'\n    });\n  }\n  async _revealReference(reference, revealParent) {\n    // check if there is anything to do...\n    if (this._revealedReference === reference) {\n      return;\n    }\n    this._revealedReference = reference;\n    // Update widget header\n    if (reference.uri.scheme !== Schemas.inMemory) {\n      this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n    } else {\n      this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n    }\n    const promise = this._textModelResolverService.createModelReference(reference.uri);\n    if (this._tree.getInput() === reference.parent) {\n      this._tree.reveal(reference);\n    } else {\n      if (revealParent) {\n        this._tree.reveal(reference.parent);\n      }\n      await this._tree.expand(reference.parent);\n      this._tree.reveal(reference);\n    }\n    const ref = await promise;\n    if (!this._model) {\n      // disposed\n      ref.dispose();\n      return;\n    }\n    dispose(this._previewModelReference);\n    // show in editor\n    const model = ref.object;\n    if (model) {\n      const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n      const sel = Range.lift(reference.range).collapseToStart();\n      this._previewModelReference = ref;\n      this._preview.setModel(model.textEditorModel);\n      this._preview.setSelection(sel);\n      this._preview.revealRangeInCenter(sel, scrollType);\n    } else {\n      this._preview.setModel(this._previewNotAvailableMessage);\n      ref.dispose();\n    }\n  }\n};\nReferenceWidget = __decorate([__param(3, IThemeService), __param(4, ITextModelService), __param(5, IInstantiationService), __param(6, peekView.IPeekViewService), __param(7, ILabelService), __param(8, IKeybindingService)], ReferenceWidget);\nexport { ReferenceWidget };","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","dom","Sizing","SplitView","Color","Emitter","Event","DisposableStore","dispose","Schemas","basenameOrAuthority","dirname","EmbeddedCodeEditorWidget","Range","ModelDecorationOptions","TextModel","PLAINTEXT_LANGUAGE_ID","ITextModelService","AccessibilityProvider","DataSource","Delegate","FileReferencesRenderer","IdentityProvider","OneReferenceRenderer","StringRepresentationProvider","peekView","nls","IInstantiationService","IKeybindingService","ILabelService","WorkbenchAsyncDataTree","IThemeService","FileReferences","OneReference","DecorationsManager","constructor","_editor","_model","_decorations","Map","_decorationIgnoreSet","Set","_callOnDispose","_callOnModelChange","add","onDidChangeModel","_onModelChanged","removeDecorations","clear","model","getModel","ref","references","uri","toString","_addDecorations","parent","reference","hasModel","onDidChangeDecorations","_onDecorationChanged","newDecorations","newDecorationsActualIndex","len","children","oneReference","has","id","push","range","options","DecorationOptions","changeDecorations","changeAccessor","decorations","deltaDecorations","set","toRemove","decorationId","newRange","getDecorationRange","ignore","equalsRange","spansMultipleLines","lineLength","endColumn","startColumn","newLineLength","delete","keys","_DecorationsManager","register","description","stickiness","className","LayoutData","ratio","heightInLines","fromJSON","raw","data","JSON","parse","ReferencesTree","ReferenceWidget","PeekViewWidget","editor","_defaultTreeKeyboardSupport","layoutData","themeService","_textModelResolverService","_instantiationService","_peekViewService","_uriLabel","_keybindingService","showFrame","showArrow","isResizeable","isAccessible","supportOnTitleClick","_disposeOnNewModel","_onDidSelectReference","onDidSelectReference","event","_dim","Dimension","_isClosing","_applyTheme","getColorTheme","onDidColorThemeChange","bind","addExclusiveWidget","create","isClosing","setModel","undefined","_preview","_previewNotAvailableMessage","_tree","_previewModelReference","_splitView","theme","borderColor","getColor","peekViewBorder","transparent","style","arrowColor","frameColor","headerBackgroundColor","peekViewTitleBackground","primaryHeadingColor","peekViewTitleForeground","secondaryHeadingColor","peekViewTitleInfoForeground","show","where","focusOnReferenceTree","domFocus","focusOnPreviewEditor","focus","isPreviewEditorFocused","hasTextFocus","_onTitleClick","e","fire","element","_getFocusedReference","kind","ctrlKey","metaKey","altKey","source","_fillBody","containerElement","setCssClass","_messageContainer","append","$","hide","orientation","_previewContainer","scrollBeyondLastLine","scrollbar","verticalScrollbarSize","horizontal","useShadows","verticalHasArrows","horizontalHasArrows","alwaysConsumeMouseWheel","overviewRulerLanes","fixedOverflowWidgets","minimap","enabled","createInstance","localize","DEFAULT_CREATION_OPTIONS","_treeContainer","treeOptions","keyboardSupport","accessibilityProvider","keyboardNavigationLabelProvider","identityProvider","openOnSingleClick","selectionNavigation","overrideStyles","listBackground","peekViewResultsBackground","addStandardDisposableListener","equals","dispatchEvent","stopPropagation","addView","onDidChange","None","minimumSize","maximumSize","Number","MAX_VALUE","layout","width","height","Distribute","_disposables","onDidSashChange","getViewSize","onEvent","_revealReference","onDidOpen","sideBySide","editorOptions","pinned","_onWidth","_doLayoutBody","heightInPixel","widthInPixel","_viewZone","resizeView","setSelection","selection","then","setFocus","newModel","_onNewModel","Promise","resolve","isEmpty","setTitle","innerText","_decorationsManager","onDidChangeReferenceRange","rerender","onMouseDown","detail","container","classList","setInput","groups","getFocus","revealReference","revealParent","_revealedReference","scheme","inMemory","getUriLabel","promise","createModelReference","getInput","reveal","expand","object","scrollType","textEditorModel","sel","lift","collapseToStart","revealRangeInCenter","IPeekViewService"],"sources":["P:/IDEA/JudgeX/JudgeX_front/node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    static { this.DecorationOptions = ModelDecorationOptions.register({\n        description: 'reference-decoration',\n        stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n        className: 'reference-decoration'\n    }); }\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            const oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        this._editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\n            for (let i = 0; i < decorations.length; i++) {\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n            }\n        });\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.removeDecorations(toRemove);\n    }\n    removeDecorations() {\n        this._editor.removeDecorations([...this._decorations.keys()]);\n        this._decorations.clear();\n    }\n}\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _keybindingService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._keybindingService = _keybindingService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._isClosing = false; // whether or not a dispose is already in progress\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    get isClosing() {\n        return this._isClosing;\n    }\n    dispose() {\n        this._isClosing = true;\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        const options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: true\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = this._instantiationService.createInstance(TextModel, nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* KeyCode.Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        const onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._disposables.add(this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        }));\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    async revealReference(reference) {\n        await this._revealReference(reference, false);\n        this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n    }\n    async _revealReference(reference, revealParent) {\n        // check if there is anything to do...\n        if (this._revealedReference === reference) {\n            return;\n        }\n        this._revealedReference = reference;\n        // Update widget header\n        if (reference.uri.scheme !== Schemas.inMemory) {\n            this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n        }\n        else {\n            this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n        }\n        const promise = this._textModelResolverService.createModelReference(reference.uri);\n        if (this._tree.getInput() === reference.parent) {\n            this._tree.reveal(reference);\n        }\n        else {\n            if (revealParent) {\n                this._tree.reveal(reference.parent);\n            }\n            await this._tree.expand(reference.parent);\n            this._tree.reveal(reference);\n        }\n        const ref = await promise;\n        if (!this._model) {\n            // disposed\n            ref.dispose();\n            return;\n        }\n        dispose(this._previewModelReference);\n        // show in editor\n        const model = ref.object;\n        if (model) {\n            const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n            const sel = Range.lift(reference.range).collapseToStart();\n            this._previewModelReference = ref;\n            this._preview.setModel(model.textEditorModel);\n            this._preview.setSelection(sel);\n            this._preview.revealRangeInCenter(sel, scrollType);\n        }\n        else {\n            this._preview.setModel(this._previewNotAvailableMessage);\n            ref.dispose();\n        }\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IKeybindingService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}