{"ast":null,"code":"var _IndentationToSpacesAction, _IndentationToTabsAction, _IndentUsingTabs, _IndentUsingSpaces, _ChangeTabDisplaySize, _DetectIndentation, _AutoIndentOnPaste;\nimport \"core-js/modules/es.array.push.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = this && this.__param || function (paramIndex, decorator) {\n  return function (target, key) {\n    decorator(target, key, paramIndex);\n  };\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport * as indentUtils from '../common/indentUtils.js';\nimport * as nls from '../../../../nls.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getReindentEditOperations } from '../common/indentation.js';\nimport { getStandardTokenTypeAtPosition } from '../../../common/tokens/lineTokens.js';\nexport class IndentationToSpacesAction extends EditorAction {\n  constructor() {\n    super({\n      id: IndentationToSpacesAction.ID,\n      label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\n      alias: 'Convert Indentation to Spaces',\n      precondition: EditorContextKeys.writable,\n      metadata: {\n        description: nls.localize2('indentationToSpacesDescription', \"Convert the tab indentation to spaces.\")\n      }\n    });\n  }\n  run(accessor, editor) {\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const modelOpts = model.getOptions();\n    const selection = editor.getSelection();\n    if (!selection) {\n      return;\n    }\n    const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, [command]);\n    editor.pushUndoStop();\n    model.updateOptions({\n      insertSpaces: true\n    });\n  }\n}\n_IndentationToSpacesAction = IndentationToSpacesAction;\n_IndentationToSpacesAction.ID = 'editor.action.indentationToSpaces';\nexport class IndentationToTabsAction extends EditorAction {\n  constructor() {\n    super({\n      id: IndentationToTabsAction.ID,\n      label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\n      alias: 'Convert Indentation to Tabs',\n      precondition: EditorContextKeys.writable,\n      metadata: {\n        description: nls.localize2('indentationToTabsDescription', \"Convert the spaces indentation to tabs.\")\n      }\n    });\n  }\n  run(accessor, editor) {\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const modelOpts = model.getOptions();\n    const selection = editor.getSelection();\n    if (!selection) {\n      return;\n    }\n    const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\n    editor.pushUndoStop();\n    editor.executeCommands(this.id, [command]);\n    editor.pushUndoStop();\n    model.updateOptions({\n      insertSpaces: false\n    });\n  }\n}\n_IndentationToTabsAction = IndentationToTabsAction;\n_IndentationToTabsAction.ID = 'editor.action.indentationToTabs';\nexport class ChangeIndentationSizeAction extends EditorAction {\n  constructor(insertSpaces, displaySizeOnly, opts) {\n    super(opts);\n    this.insertSpaces = insertSpaces;\n    this.displaySizeOnly = displaySizeOnly;\n  }\n  run(accessor, editor) {\n    const quickInputService = accessor.get(IQuickInputService);\n    const modelService = accessor.get(IModelService);\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n    const modelOpts = model.getOptions();\n    const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\n      id: n.toString(),\n      label: n.toString(),\n      // add description for tabSize value set in the configuration\n      description: n === creationOpts.tabSize && n === modelOpts.tabSize ? nls.localize('configuredTabSize', \"Configured Tab Size\") : n === creationOpts.tabSize ? nls.localize('defaultTabSize', \"Default Tab Size\") : n === modelOpts.tabSize ? nls.localize('currentTabSize', \"Current Tab Size\") : undefined\n    }));\n    // auto focus the tabSize set for the current editor\n    const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\n    setTimeout(() => {\n      quickInputService.pick(picks, {\n        placeHolder: nls.localize({\n          key: 'selectTabWidth',\n          comment: ['Tab corresponds to the tab key']\n        }, \"Select Tab Size for Current File\"),\n        activeItem: picks[autoFocusIndex]\n      }).then(pick => {\n        if (pick) {\n          if (model && !model.isDisposed()) {\n            const pickedVal = parseInt(pick.label, 10);\n            if (this.displaySizeOnly) {\n              model.updateOptions({\n                tabSize: pickedVal\n              });\n            } else {\n              model.updateOptions({\n                tabSize: pickedVal,\n                indentSize: pickedVal,\n                insertSpaces: this.insertSpaces\n              });\n            }\n          }\n        }\n      });\n    }, 50 /* quick input is sensitive to being opened so soon after another */);\n  }\n}\nexport class IndentUsingTabs extends ChangeIndentationSizeAction {\n  constructor() {\n    super(false, false, {\n      id: IndentUsingTabs.ID,\n      label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\n      alias: 'Indent Using Tabs',\n      precondition: undefined,\n      metadata: {\n        description: nls.localize2('indentUsingTabsDescription', \"Use indentation with tabs.\")\n      }\n    });\n  }\n}\n_IndentUsingTabs = IndentUsingTabs;\n_IndentUsingTabs.ID = 'editor.action.indentUsingTabs';\nexport class IndentUsingSpaces extends ChangeIndentationSizeAction {\n  constructor() {\n    super(true, false, {\n      id: IndentUsingSpaces.ID,\n      label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\n      alias: 'Indent Using Spaces',\n      precondition: undefined,\n      metadata: {\n        description: nls.localize2('indentUsingSpacesDescription', \"Use indentation with spaces.\")\n      }\n    });\n  }\n}\n_IndentUsingSpaces = IndentUsingSpaces;\n_IndentUsingSpaces.ID = 'editor.action.indentUsingSpaces';\nexport class ChangeTabDisplaySize extends ChangeIndentationSizeAction {\n  constructor() {\n    super(true, true, {\n      id: ChangeTabDisplaySize.ID,\n      label: nls.localize('changeTabDisplaySize', \"Change Tab Display Size\"),\n      alias: 'Change Tab Display Size',\n      precondition: undefined,\n      metadata: {\n        description: nls.localize2('changeTabDisplaySizeDescription', \"Change the space size equivalent of the tab.\")\n      }\n    });\n  }\n}\n_ChangeTabDisplaySize = ChangeTabDisplaySize;\n_ChangeTabDisplaySize.ID = 'editor.action.changeTabDisplaySize';\nexport class DetectIndentation extends EditorAction {\n  constructor() {\n    super({\n      id: DetectIndentation.ID,\n      label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\n      alias: 'Detect Indentation from Content',\n      precondition: undefined,\n      metadata: {\n        description: nls.localize2('detectIndentationDescription', \"Detect the indentation from content.\")\n      }\n    });\n  }\n  run(accessor, editor) {\n    const modelService = accessor.get(IModelService);\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n    model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\n  }\n}\n_DetectIndentation = DetectIndentation;\n_DetectIndentation.ID = 'editor.action.detectIndentation';\nexport class ReindentLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.reindentlines',\n      label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\n      alias: 'Reindent Lines',\n      precondition: EditorContextKeys.writable,\n      metadata: {\n        description: nls.localize2('editor.reindentlinesDescription', \"Reindent the lines of the editor.\")\n      }\n    });\n  }\n  run(accessor, editor) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n    if (edits.length > 0) {\n      editor.pushUndoStop();\n      editor.executeEdits(this.id, edits);\n      editor.pushUndoStop();\n    }\n  }\n}\nexport class ReindentSelectedLinesAction extends EditorAction {\n  constructor() {\n    super({\n      id: 'editor.action.reindentselectedlines',\n      label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\n      alias: 'Reindent Selected Lines',\n      precondition: EditorContextKeys.writable,\n      metadata: {\n        description: nls.localize2('editor.reindentselectedlinesDescription', \"Reindent the selected lines of the editor.\")\n      }\n    });\n  }\n  run(accessor, editor) {\n    const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n    const model = editor.getModel();\n    if (!model) {\n      return;\n    }\n    const selections = editor.getSelections();\n    if (selections === null) {\n      return;\n    }\n    const edits = [];\n    for (const selection of selections) {\n      let startLineNumber = selection.startLineNumber;\n      let endLineNumber = selection.endLineNumber;\n      if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\n        endLineNumber--;\n      }\n      if (startLineNumber === 1) {\n        if (startLineNumber === endLineNumber) {\n          continue;\n        }\n      } else {\n        startLineNumber--;\n      }\n      const editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\n      edits.push(...editOperations);\n    }\n    if (edits.length > 0) {\n      editor.pushUndoStop();\n      editor.executeEdits(this.id, edits);\n      editor.pushUndoStop();\n    }\n  }\n}\nexport class AutoIndentOnPasteCommand {\n  constructor(edits, initialSelection) {\n    this._initialSelection = initialSelection;\n    this._edits = [];\n    this._selectionId = null;\n    for (const edit of edits) {\n      if (edit.range && typeof edit.text === 'string') {\n        this._edits.push(edit);\n      }\n    }\n  }\n  getEditOperations(model, builder) {\n    for (const edit of this._edits) {\n      builder.addEditOperation(Range.lift(edit.range), edit.text);\n    }\n    let selectionIsSet = false;\n    if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\n      if (this._edits[0].range.startColumn === this._initialSelection.endColumn && this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\n        selectionIsSet = true;\n        this._selectionId = builder.trackSelection(this._initialSelection, true);\n      } else if (this._edits[0].range.endColumn === this._initialSelection.startColumn && this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\n        selectionIsSet = true;\n        this._selectionId = builder.trackSelection(this._initialSelection, false);\n      }\n    }\n    if (!selectionIsSet) {\n      this._selectionId = builder.trackSelection(this._initialSelection);\n    }\n  }\n  computeCursorState(model, helper) {\n    return helper.getTrackedSelection(this._selectionId);\n  }\n}\nlet AutoIndentOnPaste = (_AutoIndentOnPaste = class AutoIndentOnPaste {\n  constructor(editor, _languageConfigurationService) {\n    this.editor = editor;\n    this._languageConfigurationService = _languageConfigurationService;\n    this.callOnDispose = new DisposableStore();\n    this.callOnModel = new DisposableStore();\n    this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\n    this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\n    this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\n  }\n  update() {\n    // clean up\n    this.callOnModel.clear();\n    // we are disabled\n    if (this.editor.getOption(12 /* EditorOption.autoIndent */) < 4 /* EditorAutoIndentStrategy.Full */ || this.editor.getOption(55 /* EditorOption.formatOnPaste */)) {\n      return;\n    }\n    // no model\n    if (!this.editor.hasModel()) {\n      return;\n    }\n    this.callOnModel.add(this.editor.onDidPaste(({\n      range\n    }) => {\n      this.trigger(range);\n    }));\n  }\n  trigger(range) {\n    const selections = this.editor.getSelections();\n    if (selections === null || selections.length > 1) {\n      return;\n    }\n    const model = this.editor.getModel();\n    if (!model) {\n      return;\n    }\n    const containsOnlyWhitespace = this.rangeContainsOnlyWhitespaceCharacters(model, range);\n    if (containsOnlyWhitespace) {\n      return;\n    }\n    if (isStartOrEndInString(model, range)) {\n      return;\n    }\n    if (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber)) {\n      return;\n    }\n    const autoIndent = this.editor.getOption(12 /* EditorOption.autoIndent */);\n    const {\n      tabSize,\n      indentSize,\n      insertSpaces\n    } = model.getOptions();\n    const textEdits = [];\n    const indentConverter = {\n      shiftIndent: indentation => {\n        return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n      },\n      unshiftIndent: indentation => {\n        return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n      }\n    };\n    let startLineNumber = range.startLineNumber;\n    while (startLineNumber <= range.endLineNumber) {\n      if (this.shouldIgnoreLine(model, startLineNumber)) {\n        startLineNumber++;\n        continue;\n      }\n      break;\n    }\n    if (startLineNumber > range.endLineNumber) {\n      return;\n    }\n    let firstLineText = model.getLineContent(startLineNumber);\n    if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\n      const indentOfFirstLine = getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter, this._languageConfigurationService);\n      if (indentOfFirstLine !== null) {\n        const oldIndentation = strings.getLeadingWhitespace(firstLineText);\n        const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n        const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n        if (newSpaceCnt !== oldSpaceCnt) {\n          const newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n          textEdits.push({\n            range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\n            text: newIndent\n          });\n          firstLineText = newIndent + firstLineText.substring(oldIndentation.length);\n        } else {\n          const indentMetadata = getIndentMetadata(model, startLineNumber, this._languageConfigurationService);\n          if (indentMetadata === 0 || indentMetadata === 8 /* IndentConsts.UNINDENT_MASK */) {\n            // we paste content into a line where only contains whitespaces\n            // after pasting, the indentation of the first line is already correct\n            // the first line doesn't match any indentation rule\n            // then no-op.\n            return;\n          }\n        }\n      }\n    }\n    const firstLineNumber = startLineNumber;\n    // ignore empty or ignored lines\n    while (startLineNumber < range.endLineNumber) {\n      if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\n        startLineNumber++;\n        continue;\n      }\n      break;\n    }\n    if (startLineNumber !== range.endLineNumber) {\n      const virtualModel = {\n        tokenization: {\n          getLineTokens: lineNumber => {\n            return model.tokenization.getLineTokens(lineNumber);\n          },\n          getLanguageId: () => {\n            return model.getLanguageId();\n          },\n          getLanguageIdAtPosition: (lineNumber, column) => {\n            return model.getLanguageIdAtPosition(lineNumber, column);\n          }\n        },\n        getLineContent: lineNumber => {\n          if (lineNumber === firstLineNumber) {\n            return firstLineText;\n          } else {\n            return model.getLineContent(lineNumber);\n          }\n        }\n      };\n      const indentOfSecondLine = getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter, this._languageConfigurationService);\n      if (indentOfSecondLine !== null) {\n        const newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\n        const oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\n        if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\n          const spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\n          for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\n            const lineContent = model.getLineContent(i);\n            const originalIndent = strings.getLeadingWhitespace(lineContent);\n            const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n            const newSpacesCnt = originalSpacesCnt + spaceCntOffset;\n            const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n            if (newIndent !== originalIndent) {\n              textEdits.push({\n                range: new Range(i, 1, i, originalIndent.length + 1),\n                text: newIndent\n              });\n            }\n          }\n        }\n      }\n    }\n    if (textEdits.length > 0) {\n      this.editor.pushUndoStop();\n      const cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\n      this.editor.executeCommand('autoIndentOnPaste', cmd);\n      this.editor.pushUndoStop();\n    }\n  }\n  rangeContainsOnlyWhitespaceCharacters(model, range) {\n    const lineContainsOnlyWhitespace = content => {\n      return content.trim().length === 0;\n    };\n    let containsOnlyWhitespace = true;\n    if (range.startLineNumber === range.endLineNumber) {\n      const lineContent = model.getLineContent(range.startLineNumber);\n      const linePart = lineContent.substring(range.startColumn - 1, range.endColumn - 1);\n      containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n    } else {\n      for (let i = range.startLineNumber; i <= range.endLineNumber; i++) {\n        const lineContent = model.getLineContent(i);\n        if (i === range.startLineNumber) {\n          const linePart = lineContent.substring(range.startColumn - 1);\n          containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n        } else if (i === range.endLineNumber) {\n          const linePart = lineContent.substring(0, range.endColumn - 1);\n          containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n        } else {\n          containsOnlyWhitespace = model.getLineFirstNonWhitespaceColumn(i) === 0;\n        }\n        if (!containsOnlyWhitespace) {\n          break;\n        }\n      }\n    }\n    return containsOnlyWhitespace;\n  }\n  shouldIgnoreLine(model, lineNumber) {\n    model.tokenization.forceTokenization(lineNumber);\n    const nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n    if (nonWhitespaceColumn === 0) {\n      return true;\n    }\n    const tokens = model.tokenization.getLineTokens(lineNumber);\n    if (tokens.getCount() > 0) {\n      const firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\n      if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* StandardTokenType.Comment */) {\n        return true;\n      }\n    }\n    return false;\n  }\n  dispose() {\n    this.callOnDispose.dispose();\n    this.callOnModel.dispose();\n  }\n}, _AutoIndentOnPaste.ID = 'editor.contrib.autoIndentOnPaste', _AutoIndentOnPaste);\nAutoIndentOnPaste = __decorate([__param(1, ILanguageConfigurationService)], AutoIndentOnPaste);\nexport { AutoIndentOnPaste };\nfunction isStartOrEndInString(model, range) {\n  const isPositionInString = position => {\n    const tokenType = getStandardTokenTypeAtPosition(model, position);\n    return tokenType === 2 /* StandardTokenType.String */;\n  };\n  return isPositionInString(range.getStartPosition()) || isPositionInString(range.getEndPosition());\n}\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\n  if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n    // Model is empty\n    return;\n  }\n  let spaces = '';\n  for (let i = 0; i < tabSize; i++) {\n    spaces += ' ';\n  }\n  const spacesRegExp = new RegExp(spaces, 'gi');\n  for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n    let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n    if (lastIndentationColumn === 0) {\n      lastIndentationColumn = model.getLineMaxColumn(lineNumber);\n    }\n    if (lastIndentationColumn === 1) {\n      continue;\n    }\n    const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\n    const originalIndentation = model.getValueInRange(originalIndentationRange);\n    const newIndentation = tabsToSpaces ? originalIndentation.replace(/\\t/ig, spaces) : originalIndentation.replace(spacesRegExp, '\\t');\n    builder.addEditOperation(originalIndentationRange, newIndentation);\n  }\n}\nexport class IndentationToSpacesCommand {\n  constructor(selection, tabSize) {\n    this.selection = selection;\n    this.tabSize = tabSize;\n    this.selectionId = null;\n  }\n  getEditOperations(model, builder) {\n    this.selectionId = builder.trackSelection(this.selection);\n    getIndentationEditOperations(model, builder, this.tabSize, true);\n  }\n  computeCursorState(model, helper) {\n    return helper.getTrackedSelection(this.selectionId);\n  }\n}\nexport class IndentationToTabsCommand {\n  constructor(selection, tabSize) {\n    this.selection = selection;\n    this.tabSize = tabSize;\n    this.selectionId = null;\n  }\n  getEditOperations(model, builder) {\n    this.selectionId = builder.trackSelection(this.selection);\n    getIndentationEditOperations(model, builder, this.tabSize, false);\n  }\n  computeCursorState(model, helper) {\n    return helper.getTrackedSelection(this.selectionId);\n  }\n}\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(IndentationToSpacesAction);\nregisterEditorAction(IndentationToTabsAction);\nregisterEditorAction(IndentUsingTabs);\nregisterEditorAction(IndentUsingSpaces);\nregisterEditorAction(ChangeTabDisplaySize);\nregisterEditorAction(DetectIndentation);\nregisterEditorAction(ReindentLinesAction);\nregisterEditorAction(ReindentSelectedLinesAction);","map":{"version":3,"names":["__decorate","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","d","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","DisposableStore","strings","EditorAction","registerEditorAction","registerEditorContribution","ShiftCommand","Range","EditorContextKeys","ILanguageConfigurationService","IModelService","indentUtils","nls","IQuickInputService","getGoodIndentForLine","getIndentMetadata","getReindentEditOperations","getStandardTokenTypeAtPosition","IndentationToSpacesAction","constructor","id","ID","label","localize","alias","precondition","writable","metadata","description","localize2","run","accessor","editor","model","getModel","modelOpts","getOptions","selection","getSelection","command","IndentationToSpacesCommand","tabSize","pushUndoStop","executeCommands","updateOptions","insertSpaces","_IndentationToSpacesAction","IndentationToTabsAction","IndentationToTabsCommand","_IndentationToTabsAction","ChangeIndentationSizeAction","displaySizeOnly","opts","quickInputService","get","modelService","creationOpts","getCreationOptions","getLanguageId","uri","isForSimpleWidget","picks","map","n","toString","undefined","autoFocusIndex","Math","min","setTimeout","pick","placeHolder","comment","activeItem","then","isDisposed","pickedVal","parseInt","indentSize","IndentUsingTabs","_IndentUsingTabs","IndentUsingSpaces","_IndentUsingSpaces","ChangeTabDisplaySize","_ChangeTabDisplaySize","DetectIndentation","detectIndentation","_DetectIndentation","ReindentLinesAction","languageConfigurationService","edits","getLineCount","executeEdits","ReindentSelectedLinesAction","selections","getSelections","startLineNumber","endLineNumber","endColumn","editOperations","push","AutoIndentOnPasteCommand","initialSelection","_initialSelection","_edits","_selectionId","edit","range","text","getEditOperations","builder","addEditOperation","lift","selectionIsSet","Array","isArray","isEmpty","startColumn","trackSelection","computeCursorState","helper","getTrackedSelection","AutoIndentOnPaste","_AutoIndentOnPaste","_languageConfigurationService","callOnDispose","callOnModel","add","onDidChangeConfiguration","update","onDidChangeModel","onDidChangeModelLanguage","clear","getOption","hasModel","onDidPaste","trigger","containsOnlyWhitespace","rangeContainsOnlyWhitespaceCharacters","isStartOrEndInString","tokenization","isCheapToTokenize","getStartPosition","lineNumber","autoIndent","textEdits","indentConverter","shiftIndent","indentation","unshiftIndent","shouldIgnoreLine","firstLineText","getLineContent","test","substring","indentOfFirstLine","oldIndentation","getLeadingWhitespace","newSpaceCnt","getSpaceCnt","oldSpaceCnt","newIndent","generateIndent","indentMetadata","firstLineNumber","virtualModel","getLineTokens","getLanguageIdAtPosition","column","indentOfSecondLine","newSpaceCntOfSecondLine","oldSpaceCntOfSecondLine","spaceCntOffset","lineContent","originalIndent","originalSpacesCnt","newSpacesCnt","cmd","executeCommand","lineContainsOnlyWhitespace","content","trim","linePart","getLineFirstNonWhitespaceColumn","forceTokenization","nonWhitespaceColumn","tokens","getCount","firstNonWhitespaceTokenIndex","findTokenIndexAtOffset","getStandardTokenType","dispose","isPositionInString","position","tokenType","getEndPosition","getIndentationEditOperations","tabsToSpaces","getLineMaxColumn","spaces","spacesRegExp","RegExp","lineCount","lastIndentationColumn","originalIndentationRange","originalIndentation","getValueInRange","newIndentation","replace","selectionId"],"sources":["P:/IDEA/JudgeX/JudgeX_front/node_modules/monaco-editor/esm/vs/editor/contrib/indentation/browser/indentation.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ShiftCommand } from '../../../common/commands/shiftCommand.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport * as indentUtils from '../common/indentUtils.js';\nimport * as nls from '../../../../nls.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { getGoodIndentForLine, getIndentMetadata } from '../../../common/languages/autoIndent.js';\nimport { getReindentEditOperations } from '../common/indentation.js';\nimport { getStandardTokenTypeAtPosition } from '../../../common/tokens/lineTokens.js';\nexport class IndentationToSpacesAction extends EditorAction {\n    static { this.ID = 'editor.action.indentationToSpaces'; }\n    constructor() {\n        super({\n            id: IndentationToSpacesAction.ID,\n            label: nls.localize('indentationToSpaces', \"Convert Indentation to Spaces\"),\n            alias: 'Convert Indentation to Spaces',\n            precondition: EditorContextKeys.writable,\n            metadata: {\n                description: nls.localize2('indentationToSpacesDescription', \"Convert the tab indentation to spaces.\"),\n            }\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToSpacesCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: true\n        });\n    }\n}\nexport class IndentationToTabsAction extends EditorAction {\n    static { this.ID = 'editor.action.indentationToTabs'; }\n    constructor() {\n        super({\n            id: IndentationToTabsAction.ID,\n            label: nls.localize('indentationToTabs', \"Convert Indentation to Tabs\"),\n            alias: 'Convert Indentation to Tabs',\n            precondition: EditorContextKeys.writable,\n            metadata: {\n                description: nls.localize2('indentationToTabsDescription', \"Convert the spaces indentation to tabs.\"),\n            }\n        });\n    }\n    run(accessor, editor) {\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const modelOpts = model.getOptions();\n        const selection = editor.getSelection();\n        if (!selection) {\n            return;\n        }\n        const command = new IndentationToTabsCommand(selection, modelOpts.tabSize);\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, [command]);\n        editor.pushUndoStop();\n        model.updateOptions({\n            insertSpaces: false\n        });\n    }\n}\nexport class ChangeIndentationSizeAction extends EditorAction {\n    constructor(insertSpaces, displaySizeOnly, opts) {\n        super(opts);\n        this.insertSpaces = insertSpaces;\n        this.displaySizeOnly = displaySizeOnly;\n    }\n    run(accessor, editor) {\n        const quickInputService = accessor.get(IQuickInputService);\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        const modelOpts = model.getOptions();\n        const picks = [1, 2, 3, 4, 5, 6, 7, 8].map(n => ({\n            id: n.toString(),\n            label: n.toString(),\n            // add description for tabSize value set in the configuration\n            description: (n === creationOpts.tabSize && n === modelOpts.tabSize\n                ? nls.localize('configuredTabSize', \"Configured Tab Size\")\n                : n === creationOpts.tabSize\n                    ? nls.localize('defaultTabSize', \"Default Tab Size\")\n                    : n === modelOpts.tabSize\n                        ? nls.localize('currentTabSize', \"Current Tab Size\")\n                        : undefined)\n        }));\n        // auto focus the tabSize set for the current editor\n        const autoFocusIndex = Math.min(model.getOptions().tabSize - 1, 7);\n        setTimeout(() => {\n            quickInputService.pick(picks, { placeHolder: nls.localize({ key: 'selectTabWidth', comment: ['Tab corresponds to the tab key'] }, \"Select Tab Size for Current File\"), activeItem: picks[autoFocusIndex] }).then(pick => {\n                if (pick) {\n                    if (model && !model.isDisposed()) {\n                        const pickedVal = parseInt(pick.label, 10);\n                        if (this.displaySizeOnly) {\n                            model.updateOptions({\n                                tabSize: pickedVal\n                            });\n                        }\n                        else {\n                            model.updateOptions({\n                                tabSize: pickedVal,\n                                indentSize: pickedVal,\n                                insertSpaces: this.insertSpaces\n                            });\n                        }\n                    }\n                }\n            });\n        }, 50 /* quick input is sensitive to being opened so soon after another */);\n    }\n}\nexport class IndentUsingTabs extends ChangeIndentationSizeAction {\n    static { this.ID = 'editor.action.indentUsingTabs'; }\n    constructor() {\n        super(false, false, {\n            id: IndentUsingTabs.ID,\n            label: nls.localize('indentUsingTabs', \"Indent Using Tabs\"),\n            alias: 'Indent Using Tabs',\n            precondition: undefined,\n            metadata: {\n                description: nls.localize2('indentUsingTabsDescription', \"Use indentation with tabs.\"),\n            }\n        });\n    }\n}\nexport class IndentUsingSpaces extends ChangeIndentationSizeAction {\n    static { this.ID = 'editor.action.indentUsingSpaces'; }\n    constructor() {\n        super(true, false, {\n            id: IndentUsingSpaces.ID,\n            label: nls.localize('indentUsingSpaces', \"Indent Using Spaces\"),\n            alias: 'Indent Using Spaces',\n            precondition: undefined,\n            metadata: {\n                description: nls.localize2('indentUsingSpacesDescription', \"Use indentation with spaces.\"),\n            }\n        });\n    }\n}\nexport class ChangeTabDisplaySize extends ChangeIndentationSizeAction {\n    static { this.ID = 'editor.action.changeTabDisplaySize'; }\n    constructor() {\n        super(true, true, {\n            id: ChangeTabDisplaySize.ID,\n            label: nls.localize('changeTabDisplaySize', \"Change Tab Display Size\"),\n            alias: 'Change Tab Display Size',\n            precondition: undefined,\n            metadata: {\n                description: nls.localize2('changeTabDisplaySizeDescription', \"Change the space size equivalent of the tab.\"),\n            }\n        });\n    }\n}\nexport class DetectIndentation extends EditorAction {\n    static { this.ID = 'editor.action.detectIndentation'; }\n    constructor() {\n        super({\n            id: DetectIndentation.ID,\n            label: nls.localize('detectIndentation', \"Detect Indentation from Content\"),\n            alias: 'Detect Indentation from Content',\n            precondition: undefined,\n            metadata: {\n                description: nls.localize2('detectIndentationDescription', \"Detect the indentation from content.\"),\n            }\n        });\n    }\n    run(accessor, editor) {\n        const modelService = accessor.get(IModelService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const creationOpts = modelService.getCreationOptions(model.getLanguageId(), model.uri, model.isForSimpleWidget);\n        model.detectIndentation(creationOpts.insertSpaces, creationOpts.tabSize);\n    }\n}\nexport class ReindentLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentlines',\n            label: nls.localize('editor.reindentlines', \"Reindent Lines\"),\n            alias: 'Reindent Lines',\n            precondition: EditorContextKeys.writable,\n            metadata: {\n                description: nls.localize2('editor.reindentlinesDescription', \"Reindent the lines of the editor.\"),\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const edits = getReindentEditOperations(model, languageConfigurationService, 1, model.getLineCount());\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class ReindentSelectedLinesAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.reindentselectedlines',\n            label: nls.localize('editor.reindentselectedlines', \"Reindent Selected Lines\"),\n            alias: 'Reindent Selected Lines',\n            precondition: EditorContextKeys.writable,\n            metadata: {\n                description: nls.localize2('editor.reindentselectedlinesDescription', \"Reindent the selected lines of the editor.\"),\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        const model = editor.getModel();\n        if (!model) {\n            return;\n        }\n        const selections = editor.getSelections();\n        if (selections === null) {\n            return;\n        }\n        const edits = [];\n        for (const selection of selections) {\n            let startLineNumber = selection.startLineNumber;\n            let endLineNumber = selection.endLineNumber;\n            if (startLineNumber !== endLineNumber && selection.endColumn === 1) {\n                endLineNumber--;\n            }\n            if (startLineNumber === 1) {\n                if (startLineNumber === endLineNumber) {\n                    continue;\n                }\n            }\n            else {\n                startLineNumber--;\n            }\n            const editOperations = getReindentEditOperations(model, languageConfigurationService, startLineNumber, endLineNumber);\n            edits.push(...editOperations);\n        }\n        if (edits.length > 0) {\n            editor.pushUndoStop();\n            editor.executeEdits(this.id, edits);\n            editor.pushUndoStop();\n        }\n    }\n}\nexport class AutoIndentOnPasteCommand {\n    constructor(edits, initialSelection) {\n        this._initialSelection = initialSelection;\n        this._edits = [];\n        this._selectionId = null;\n        for (const edit of edits) {\n            if (edit.range && typeof edit.text === 'string') {\n                this._edits.push(edit);\n            }\n        }\n    }\n    getEditOperations(model, builder) {\n        for (const edit of this._edits) {\n            builder.addEditOperation(Range.lift(edit.range), edit.text);\n        }\n        let selectionIsSet = false;\n        if (Array.isArray(this._edits) && this._edits.length === 1 && this._initialSelection.isEmpty()) {\n            if (this._edits[0].range.startColumn === this._initialSelection.endColumn &&\n                this._edits[0].range.startLineNumber === this._initialSelection.endLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, true);\n            }\n            else if (this._edits[0].range.endColumn === this._initialSelection.startColumn &&\n                this._edits[0].range.endLineNumber === this._initialSelection.startLineNumber) {\n                selectionIsSet = true;\n                this._selectionId = builder.trackSelection(this._initialSelection, false);\n            }\n        }\n        if (!selectionIsSet) {\n            this._selectionId = builder.trackSelection(this._initialSelection);\n        }\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\nlet AutoIndentOnPaste = class AutoIndentOnPaste {\n    static { this.ID = 'editor.contrib.autoIndentOnPaste'; }\n    constructor(editor, _languageConfigurationService) {\n        this.editor = editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this.callOnDispose = new DisposableStore();\n        this.callOnModel = new DisposableStore();\n        this.callOnDispose.add(editor.onDidChangeConfiguration(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModel(() => this.update()));\n        this.callOnDispose.add(editor.onDidChangeModelLanguage(() => this.update()));\n    }\n    update() {\n        // clean up\n        this.callOnModel.clear();\n        // we are disabled\n        if (this.editor.getOption(12 /* EditorOption.autoIndent */) < 4 /* EditorAutoIndentStrategy.Full */ || this.editor.getOption(55 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        this.callOnModel.add(this.editor.onDidPaste(({ range }) => {\n            this.trigger(range);\n        }));\n    }\n    trigger(range) {\n        const selections = this.editor.getSelections();\n        if (selections === null || selections.length > 1) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        const containsOnlyWhitespace = this.rangeContainsOnlyWhitespaceCharacters(model, range);\n        if (containsOnlyWhitespace) {\n            return;\n        }\n        if (isStartOrEndInString(model, range)) {\n            return;\n        }\n        if (!model.tokenization.isCheapToTokenize(range.getStartPosition().lineNumber)) {\n            return;\n        }\n        const autoIndent = this.editor.getOption(12 /* EditorOption.autoIndent */);\n        const { tabSize, indentSize, insertSpaces } = model.getOptions();\n        const textEdits = [];\n        const indentConverter = {\n            shiftIndent: (indentation) => {\n                return ShiftCommand.shiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            },\n            unshiftIndent: (indentation) => {\n                return ShiftCommand.unshiftIndent(indentation, indentation.length + 1, tabSize, indentSize, insertSpaces);\n            }\n        };\n        let startLineNumber = range.startLineNumber;\n        while (startLineNumber <= range.endLineNumber) {\n            if (this.shouldIgnoreLine(model, startLineNumber)) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber > range.endLineNumber) {\n            return;\n        }\n        let firstLineText = model.getLineContent(startLineNumber);\n        if (!/\\S/.test(firstLineText.substring(0, range.startColumn - 1))) {\n            const indentOfFirstLine = getGoodIndentForLine(autoIndent, model, model.getLanguageId(), startLineNumber, indentConverter, this._languageConfigurationService);\n            if (indentOfFirstLine !== null) {\n                const oldIndentation = strings.getLeadingWhitespace(firstLineText);\n                const newSpaceCnt = indentUtils.getSpaceCnt(indentOfFirstLine, tabSize);\n                const oldSpaceCnt = indentUtils.getSpaceCnt(oldIndentation, tabSize);\n                if (newSpaceCnt !== oldSpaceCnt) {\n                    const newIndent = indentUtils.generateIndent(newSpaceCnt, tabSize, insertSpaces);\n                    textEdits.push({\n                        range: new Range(startLineNumber, 1, startLineNumber, oldIndentation.length + 1),\n                        text: newIndent\n                    });\n                    firstLineText = newIndent + firstLineText.substring(oldIndentation.length);\n                }\n                else {\n                    const indentMetadata = getIndentMetadata(model, startLineNumber, this._languageConfigurationService);\n                    if (indentMetadata === 0 || indentMetadata === 8 /* IndentConsts.UNINDENT_MASK */) {\n                        // we paste content into a line where only contains whitespaces\n                        // after pasting, the indentation of the first line is already correct\n                        // the first line doesn't match any indentation rule\n                        // then no-op.\n                        return;\n                    }\n                }\n            }\n        }\n        const firstLineNumber = startLineNumber;\n        // ignore empty or ignored lines\n        while (startLineNumber < range.endLineNumber) {\n            if (!/\\S/.test(model.getLineContent(startLineNumber + 1))) {\n                startLineNumber++;\n                continue;\n            }\n            break;\n        }\n        if (startLineNumber !== range.endLineNumber) {\n            const virtualModel = {\n                tokenization: {\n                    getLineTokens: (lineNumber) => {\n                        return model.tokenization.getLineTokens(lineNumber);\n                    },\n                    getLanguageId: () => {\n                        return model.getLanguageId();\n                    },\n                    getLanguageIdAtPosition: (lineNumber, column) => {\n                        return model.getLanguageIdAtPosition(lineNumber, column);\n                    },\n                },\n                getLineContent: (lineNumber) => {\n                    if (lineNumber === firstLineNumber) {\n                        return firstLineText;\n                    }\n                    else {\n                        return model.getLineContent(lineNumber);\n                    }\n                }\n            };\n            const indentOfSecondLine = getGoodIndentForLine(autoIndent, virtualModel, model.getLanguageId(), startLineNumber + 1, indentConverter, this._languageConfigurationService);\n            if (indentOfSecondLine !== null) {\n                const newSpaceCntOfSecondLine = indentUtils.getSpaceCnt(indentOfSecondLine, tabSize);\n                const oldSpaceCntOfSecondLine = indentUtils.getSpaceCnt(strings.getLeadingWhitespace(model.getLineContent(startLineNumber + 1)), tabSize);\n                if (newSpaceCntOfSecondLine !== oldSpaceCntOfSecondLine) {\n                    const spaceCntOffset = newSpaceCntOfSecondLine - oldSpaceCntOfSecondLine;\n                    for (let i = startLineNumber + 1; i <= range.endLineNumber; i++) {\n                        const lineContent = model.getLineContent(i);\n                        const originalIndent = strings.getLeadingWhitespace(lineContent);\n                        const originalSpacesCnt = indentUtils.getSpaceCnt(originalIndent, tabSize);\n                        const newSpacesCnt = originalSpacesCnt + spaceCntOffset;\n                        const newIndent = indentUtils.generateIndent(newSpacesCnt, tabSize, insertSpaces);\n                        if (newIndent !== originalIndent) {\n                            textEdits.push({\n                                range: new Range(i, 1, i, originalIndent.length + 1),\n                                text: newIndent\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        if (textEdits.length > 0) {\n            this.editor.pushUndoStop();\n            const cmd = new AutoIndentOnPasteCommand(textEdits, this.editor.getSelection());\n            this.editor.executeCommand('autoIndentOnPaste', cmd);\n            this.editor.pushUndoStop();\n        }\n    }\n    rangeContainsOnlyWhitespaceCharacters(model, range) {\n        const lineContainsOnlyWhitespace = (content) => {\n            return content.trim().length === 0;\n        };\n        let containsOnlyWhitespace = true;\n        if (range.startLineNumber === range.endLineNumber) {\n            const lineContent = model.getLineContent(range.startLineNumber);\n            const linePart = lineContent.substring(range.startColumn - 1, range.endColumn - 1);\n            containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n        }\n        else {\n            for (let i = range.startLineNumber; i <= range.endLineNumber; i++) {\n                const lineContent = model.getLineContent(i);\n                if (i === range.startLineNumber) {\n                    const linePart = lineContent.substring(range.startColumn - 1);\n                    containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n                }\n                else if (i === range.endLineNumber) {\n                    const linePart = lineContent.substring(0, range.endColumn - 1);\n                    containsOnlyWhitespace = lineContainsOnlyWhitespace(linePart);\n                }\n                else {\n                    containsOnlyWhitespace = model.getLineFirstNonWhitespaceColumn(i) === 0;\n                }\n                if (!containsOnlyWhitespace) {\n                    break;\n                }\n            }\n        }\n        return containsOnlyWhitespace;\n    }\n    shouldIgnoreLine(model, lineNumber) {\n        model.tokenization.forceTokenization(lineNumber);\n        const nonWhitespaceColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (nonWhitespaceColumn === 0) {\n            return true;\n        }\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        if (tokens.getCount() > 0) {\n            const firstNonWhitespaceTokenIndex = tokens.findTokenIndexAtOffset(nonWhitespaceColumn);\n            if (firstNonWhitespaceTokenIndex >= 0 && tokens.getStandardTokenType(firstNonWhitespaceTokenIndex) === 1 /* StandardTokenType.Comment */) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        this.callOnDispose.dispose();\n        this.callOnModel.dispose();\n    }\n};\nAutoIndentOnPaste = __decorate([\n    __param(1, ILanguageConfigurationService)\n], AutoIndentOnPaste);\nexport { AutoIndentOnPaste };\nfunction isStartOrEndInString(model, range) {\n    const isPositionInString = (position) => {\n        const tokenType = getStandardTokenTypeAtPosition(model, position);\n        return tokenType === 2 /* StandardTokenType.String */;\n    };\n    return isPositionInString(range.getStartPosition()) || isPositionInString(range.getEndPosition());\n}\nfunction getIndentationEditOperations(model, builder, tabSize, tabsToSpaces) {\n    if (model.getLineCount() === 1 && model.getLineMaxColumn(1) === 1) {\n        // Model is empty\n        return;\n    }\n    let spaces = '';\n    for (let i = 0; i < tabSize; i++) {\n        spaces += ' ';\n    }\n    const spacesRegExp = new RegExp(spaces, 'gi');\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        let lastIndentationColumn = model.getLineFirstNonWhitespaceColumn(lineNumber);\n        if (lastIndentationColumn === 0) {\n            lastIndentationColumn = model.getLineMaxColumn(lineNumber);\n        }\n        if (lastIndentationColumn === 1) {\n            continue;\n        }\n        const originalIndentationRange = new Range(lineNumber, 1, lineNumber, lastIndentationColumn);\n        const originalIndentation = model.getValueInRange(originalIndentationRange);\n        const newIndentation = (tabsToSpaces\n            ? originalIndentation.replace(/\\t/ig, spaces)\n            : originalIndentation.replace(spacesRegExp, '\\t'));\n        builder.addEditOperation(originalIndentationRange, newIndentation);\n    }\n}\nexport class IndentationToSpacesCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, true);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nexport class IndentationToTabsCommand {\n    constructor(selection, tabSize) {\n        this.selection = selection;\n        this.tabSize = tabSize;\n        this.selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        this.selectionId = builder.trackSelection(this.selection);\n        getIndentationEditOperations(model, builder, this.tabSize, false);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this.selectionId);\n    }\n}\nregisterEditorContribution(AutoIndentOnPaste.ID, AutoIndentOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(IndentationToSpacesAction);\nregisterEditorAction(IndentationToTabsAction);\nregisterEditorAction(IndentUsingTabs);\nregisterEditorAction(IndentUsingSpaces);\nregisterEditorAction(ChangeTabDisplaySize);\nregisterEditorAction(DetectIndentation);\nregisterEditorAction(ReindentLinesAction);\nregisterEditorAction(ReindentSelectedLinesAction);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}